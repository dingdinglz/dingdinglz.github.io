<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Python on Dinglz 's Blog</title><link>https://dingdinglz.github.io/tags/python/</link><description>Recent content in Python on Dinglz 's Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 18 Jan 2026 02:00:00 +0000</lastBuildDate><atom:link href="https://dingdinglz.github.io/tags/python/index.xml" rel="self" type="application/rss+xml"/><item><title>dinglzå¸¦ä½ è¯»deepcode</title><link>https://dingdinglz.github.io/p/dinglz%E5%B8%A6%E4%BD%A0%E8%AF%BBdeepcode/</link><pubDate>Sun, 18 Jan 2026 02:00:00 +0000</pubDate><guid>https://dingdinglz.github.io/p/dinglz%E5%B8%A6%E4%BD%A0%E8%AF%BBdeepcode/</guid><description>&lt;p>ä»Šå¤©æˆ‘ä»¬è¦çœ‹çš„é¡¹ç›®æ˜¯ï¼šhttps://github.com/HKUDS/DeepCode ï¼Œæˆ‘è¯»çš„commitæ˜¯mainåˆ†æ”¯çš„ab730642731d9c8a400cad78e76962253ac875f2&lt;/p>
&lt;p>è·Ÿç€æœ¬ç¯‡blogè¯»repoå»ºè®®æŠŠä»£ç æ‹‰ä¸‹æ¥ï¼Œåˆ‡åˆ°ç›¸åŒçš„commitï¼Œè·Ÿç€æµç¨‹ä¸€èµ·æ¥è¯»&lt;/p>
&lt;h2 id="æ¦‚è¿°">æ¦‚è¿°
&lt;/h2>&lt;p>DeepCode æ˜¯ä¸€ä¸ªåŸºäºŽå¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„å¼€æºæ¡†æž¶ï¼Œæ—¨åœ¨å°†ç ”ç©¶è®ºæ–‡ã€è‡ªç„¶è¯­è¨€æè¿°ç­‰è¾“å…¥è‡ªåŠ¨è½¬æ¢ä¸ºç”Ÿäº§çº§ä»£ç ã€‚è¯¥é¡¹ç›®é€šè¿‡è‡ªåŠ¨åŒ–ç®—æ³•å®žçŽ°ã€å‰ç«¯å¼€å‘å’ŒåŽç«¯æž„å»ºï¼Œæ˜¾è‘—æå‡äº†ç ”å‘æ•ˆçŽ‡ã€‚å…¶æ ¸å¿ƒç›®æ ‡æ˜¯è§£å†³ç ”ç©¶äººå‘˜åœ¨å®žçŽ°å¤æ‚ç®—æ³•æ—¶é¢ä¸´çš„æŒ‘æˆ˜ï¼Œå‡å°‘å¼€å‘å»¶è¿Ÿï¼Œå¹¶é¿å…é‡å¤æ€§ç¼–ç å·¥ä½œã€‚&lt;/p>
&lt;p>DeepCode æ”¯æŒå¤šç§è¾“å…¥å½¢å¼ï¼ŒåŒ…æ‹¬å­¦æœ¯è®ºæ–‡ã€æ–‡æœ¬æç¤ºã€URL å’Œæ–‡æ¡£æ–‡ä»¶ï¼ˆå¦‚ PDFã€DOCã€PPTXã€TXTã€HTMLï¼‰ï¼Œå¹¶èƒ½ç”Ÿæˆé«˜è´¨é‡ã€å¯æ‰©å±•ä¸”åŠŸèƒ½ä¸°å¯Œçš„ä»£ç ã€‚è¯¥ç³»ç»Ÿé‡‡ç”¨å¤šæ™ºèƒ½ä½“åä½œæž¶æž„ï¼Œèƒ½å¤Ÿå¤„ç†å¤æ‚çš„å¼€å‘ä»»åŠ¡ï¼Œä»Žæ¦‚å¿µåˆ°å¯éƒ¨ç½²çš„åº”ç”¨ç¨‹åºã€‚&lt;/p>
&lt;pre class="mermaid">
flowchart LR
A[&amp;#34;ðŸ“„ ç ”ç©¶è®ºæ–‡&amp;lt;br/&amp;gt;ðŸ’¬ æ–‡æœ¬æç¤º&amp;lt;br/&amp;gt;ðŸŒ URLs &amp;amp; æ–‡æ¡£&amp;lt;br/&amp;gt;ðŸ“Ž æ–‡ä»¶: PDF, DOC, PPTX, TXT, HTML&amp;#34;] --&amp;gt; B[&amp;#34;ðŸ§  DeepCode&amp;lt;br/&amp;gt;å¤šæ™ºèƒ½ä½“å¼•æ“Ž&amp;#34;]
B --&amp;gt; C[&amp;#34;ðŸš€ ç®—æ³•å®žçŽ° &amp;lt;br/&amp;gt;ðŸŽ¨ å‰ç«¯å¼€å‘ &amp;lt;br/&amp;gt;âš™ï¸ åŽç«¯å¼€å‘&amp;#34;]
style A fill:#ff6b6b,stroke:#c0392b,stroke-width:2px,color:#000
style B fill:#00d4ff,stroke:#0984e3,stroke-width:3px,color:#000
style C fill:#00b894,stroke:#00a085,stroke-width:2px,color:#000
&lt;/pre>
&lt;h2 id="å…¥å£">å…¥å£
&lt;/h2>&lt;p>è¦è¯»æ‡‚å…¨æµç¨‹ï¼Œå…ˆæ‰¾å…¥å£ï¼Œå¼€å§‹äºŽï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">python cli/main_cli.py --file paper.pdf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥æˆ‘ä»¬å…ˆæ¥çœ‹&lt;code>cli/main_cli.py&lt;/code>ã€‚&lt;/p>
&lt;p>æ‰¾åˆ°mainå‡½æ•°ï¼Œè·³è¿‡çŽ¯å¢ƒæ£€æŸ¥ç­‰ç­‰ï¼Œä½ ä¼šå‘çŽ°æœ€æ ¸å¿ƒçš„åœ°æ–¹åœ¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">chat&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># éªŒè¯æ–‡ä»¶å­˜åœ¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">Colors&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FAIL&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">âŒ File not found: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="si">}{&lt;/span>&lt;span class="n">Colors&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ENDC&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">success&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">run_direct_processing&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;file&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">success&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">run_direct_processing&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">chat&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># éªŒè¯chatè¾“å…¥é•¿åº¦&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">chat&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">Colors&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FAIL&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">âŒ Chat input too short. Please provide more detailed requirements (at least 20 characters)&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">Colors&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ENDC&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">success&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">run_direct_processing&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">chat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;chat&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">success&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># äº¤äº’å¼æ¨¡å¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">Colors&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CYAN&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">ðŸŽ® Starting interactive mode...&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">Colors&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ENDC&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">run_interactive_session&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªéœ€è¦çœ‹&lt;code>run_direct_processing&lt;/code>å‡½æ•°å°±okäº†&lt;/p>
&lt;p>æ¥çœ‹ï¼šè¿™ä¸ªå‡½æ•°é‡Œçš„æ ¸å¿ƒä»£ç &lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆå§‹åŒ–åº”ç”¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">init_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">initialize_mcp_app&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="n">init_result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;status&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;success&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">Colors&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FAIL&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">âŒ Initialization failed: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">init_result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;message&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="si">}{&lt;/span>&lt;span class="n">Colors&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ENDC&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¤„ç†è¾“å…¥&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">process_input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">input_source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">input_type&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¦å…³æ³¨çš„å…¶å®žä¹Ÿå°±æ˜¯ï¼š&lt;code>app.initialize_mcp_app()&lt;/code>å’Œ&lt;code>app.process_input(input_source, input_type)&lt;/code>ï¼Œè¿˜è®°å¾—input_sourceå’Œinput_typeå—ï¼Œinput_typeæœ‰chatã€urlã€fileï¼Œsourceå°±æ˜¯å¯¹åº”çš„å†…å®¹&lt;/p>
&lt;p>é‚£æˆ‘ä»¬ä¸‹é¢åˆ†åˆ«æ¥çœ‹&lt;code>app.initialize_mcp_app()&lt;/code>å’Œ&lt;code>app.process_input(input_source, input_type)&lt;/code>ï¼Œè®°å½•ä¸€ä¸‹çŽ°åœ¨çš„taskList&lt;/p>
&lt;hr>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> è¯»&lt;code>app.initialize_mcp_app()&lt;/code>&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> è¯»&lt;code>app.process_input(input_source, input_type)&lt;/code>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="mcpéƒ¨åˆ†">mcpéƒ¨åˆ†
&lt;/h2>&lt;p>æ¥çœ‹&lt;code>app.initialize_mcp_app()&lt;/code>ï¼Œæœ€ç»ˆå®šä½åˆ°&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">async&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="nf">initialize_mcp_app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;åˆå§‹åŒ–MCPåº”ç”¨ - ä½¿ç”¨å·¥ä½œæµé€‚é…å™¨&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Workflow adapter will handle MCP initialization&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">workflow_adapter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">initialize_mcp_app&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥çœ‹&lt;code>self.workflow_adapter.initialize_mcp_app()&lt;/code>ï¼Œæ ¸å¿ƒä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Initialize MCP application&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MCPApp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;cli_agent_orchestration&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app_context&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">agent_app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app_context&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="fm">__aenter__&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯¶ï¼ŸåŽŸæ¥ä¸æ˜¯åˆå§‹åŒ–mcpçš„é…ç½®ï¼Œè€Œæ˜¯ç›´æŽ¥åˆå§‹åŒ–äº†self.appä¹Ÿå°±æ˜¯æ ¸å¿ƒçš„agentï¼Œä»–è¿™é‡Œagentå°±å«åšmcp applicationï¼Œæ€»ä¹‹è¿™é‡Œå…ˆæŠŠcliçš„appåˆå§‹åŒ–æˆäº†cli_agent_orchestrationï¼Œå¯ä»¥ç»™å¤§å®¶çœ‹ä¸€ä¸‹è¿™è¾¹agentçš„æž¶æž„å›¾ï¼š&lt;/p>
&lt;pre class="mermaid">
graph TB
subgraph &amp;#34;æ™ºèƒ½ä½“å±‚&amp;#34;
CO[ä¸­å¤®åè°ƒæ™ºèƒ½ä½“]
IU[æ„å›¾ç†è§£æ™ºèƒ½ä½“]
DP[æ–‡æ¡£è§£æžæ™ºèƒ½ä½“]
CP[ä»£ç è§„åˆ’æ™ºèƒ½ä½“]
CR[ä»£ç å‚è€ƒæŒ–æŽ˜æ™ºèƒ½ä½“]
CI[ä»£ç ç”Ÿæˆæ™ºèƒ½ä½“]
end
subgraph &amp;#34;MCPæœåŠ¡å™¨å±‚&amp;#34;
DS[document-segmentation]
FI[filesystem]
BR[brave]
GH[github-downloader]
CI_S[command-executor]
CI_I[Code Implementation Server]
end
CO --&amp;gt; |è°ƒåº¦| IU
CO --&amp;gt; |è°ƒåº¦| DP
CO --&amp;gt; |è°ƒåº¦| CP
CO --&amp;gt; |è°ƒåº¦| CR
CO --&amp;gt; |è°ƒåº¦| CI
DP --&amp;gt; |è°ƒç”¨| DS
CR --&amp;gt; |è°ƒç”¨| BR
CR --&amp;gt; |è°ƒç”¨| GH
CI --&amp;gt; |è°ƒç”¨| FI
CI --&amp;gt; |è°ƒç”¨| CI_S
CI --&amp;gt; |è°ƒç”¨| CI_I
&lt;/pre>
&lt;p>åˆšåˆšåˆå§‹åŒ–çš„å°±æ˜¯ä¸­å¤®åè°ƒæ™ºèƒ½ä½“ï¼Œè®©æˆ‘ä»¬æ›´æ–°ä¸€ä¸‹tasklist&lt;/p>
&lt;hr>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> è¯»&lt;code>app.initialize_mcp_app()&lt;/code>&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> è¯»&lt;code>app.process_input(input_source, input_type)&lt;/code>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>é‚£æˆ‘ä»¬æŽ¥ç€æ¥çœ‹ï¼š&lt;code>app.process_input(input_source, input_type)&lt;/code>&lt;/p>
&lt;h2 id="appprocess_inputinput_source-input_type">app.process_input(input_source, input_type)
&lt;/h2>&lt;p>è¿™é‡Œæœ‰æ®µæŒºå¥‡æ€ªçš„ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Update segmentation configuration before processing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åœ¨å¤„ç†ä¹‹å‰æ›´æ–°segmentation configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">update_segmentation_config&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çœ‹ä¸‹è¿™ä¸ªå‡½æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">update_segmentation_config&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;Update document segmentation configuration in mcp_agent.config.yaml&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">import&lt;/span> &lt;span class="nn">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dirname&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dirname&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">abspath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="vm">__file__&lt;/span>&lt;span class="p">))),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;mcp_agent.config.yaml&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Read current config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">config_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;r&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;utf-8&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">yaml&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">safe_load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Update document segmentation settings&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="s2">&amp;#34;document_segmentation&amp;#34;&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">config&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;document_segmentation&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;document_segmentation&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;enabled&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">segmentation_config&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;enabled&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;document_segmentation&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;size_threshold_chars&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">segmentation_config&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;size_threshold_chars&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Write updated config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">config_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;utf-8&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">yaml&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dump&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">default_flow_style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">False&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">allow_unicode&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cli&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">print_status&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;ðŸ“„ Document segmentation configuration updated&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;success&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">except&lt;/span> &lt;span class="ne">Exception&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cli&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">print_status&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;âš ï¸ Failed to update segmentation config: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;warning&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‘çŽ°å…¶å®žå°±æ˜¯å…ˆåŠ è½½é…ç½®ï¼Œç„¶åŽåŒæ­¥cliçš„é…ç½®&lt;/p>
&lt;p>å†å›žæ¥çœ‹ï¼Œç„¶åŽè¿™ä¸ªå‡½æ•°çš„æ ¸å¿ƒå°±åœ¨äºŽï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä½¿ç”¨å·¥ä½œæµé€‚é…å™¨è¿›è¡Œå¤„ç†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">workflow_adapter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">process_input_with_orchestration&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input_source&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">input_source&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input_type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">input_type&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">enable_indexing&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cli&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable_indexing&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿›åˆ°è¿™ä¸ªå‡½æ•°é‡Œçœ‹çœ‹ï¼Œå‰é¢éƒ½æ˜¯é¢„å¤„ç†ï¼Œæœ€æ ¸å¿ƒçš„ä»£ç åœ¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Execute appropriate pipeline based on input type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="n">input_type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;chat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Use chat-based planning pipeline for user requirements&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pipeline_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">execute_chat_pipeline&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">input_source&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Use traditional multi-agent research pipeline for files/URLs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pipeline_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">execute_full_pipeline&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input_source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">enable_indexing&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">enable_indexing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹fileå’Œurlä¸‹çš„å…¨æµç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦çœ‹ä¸‹&lt;code>self.execute_full_pipeline&lt;/code>å°±è¡Œäº†ï¼Œæ›´æ–°ä¸€ä¸‹tasklist&lt;/p>
&lt;hr>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> è¯»&lt;code>app.initialize_mcp_app()&lt;/code>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> è¯»&lt;code>app.process_input(input_source, input_type)&lt;/code>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>å¹¶è¡Œä»»åŠ¡ç»“æŸäº†ï¼Œæˆ‘ä»¬ä¸‹é¢æ¥è¯»&lt;code>self.execute_full_pipeline&lt;/code>ã€‚&lt;/p>
&lt;h2 id="selfexecute_full_pipeline">self.execute_full_pipeline
&lt;/h2>&lt;p>è¯»ä¸€ä¸‹å‘çŽ°è¿™ä¸ªå‡½æ•°æœ€æ ¸å¿ƒçš„åœ°æ–¹å°±åœ¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">execute_multi_agent_research_pipeline&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input_source&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">input_source&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">logger&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">logger&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">progress_callback&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">progress_callback&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">enable_indexing&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">enable_indexing&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‚£æˆ‘ä»¬è¿›åˆ°&lt;code>execute_multi_agent_research_pipeline&lt;/code>é‡Œï¼Œå¯ä»¥çœ‹å‡ºæ¥æˆ‘ä»¬ç¦»æ ¸å¿ƒä»£ç è¶Šæ¥è¶Šè¿‘äº†&lt;/p>
&lt;h2 id="execute_multi_agent_research_pipeline">execute_multi_agent_research_pipeline
&lt;/h2>&lt;p>å…ˆçœ‹ä¸€ä¸‹è¿™ä¸ªå‡½æ•°çš„æ³¨é‡Šå§ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Execute the complete intelligent multi-agent research orchestration pipeline.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This is the main AI orchestration engine that coordinates autonomous research workflow agents:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Local workspace automation for seamless environment management
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Intelligent research analysis with automated content processing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- AI-driven code architecture synthesis and design automation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Reference intelligence discovery with automated knowledge extraction (optional)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Codebase intelligence orchestration with automated relationship analysis (optional)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Intelligent code implementation synthesis with AI-powered development
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¿»è¯‘æ¥å–½ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">æ‰§è¡Œå®Œæ•´çš„æ™ºèƒ½å¤šæ™ºèƒ½ä½“ç ”ç©¶ç¼–æŽ’æµç¨‹ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¿™æ˜¯åè°ƒè‡ªä¸»ç ”ç©¶å·¥ä½œæµæ™ºèƒ½ä½“çš„ä¸»è¦AIç¼–æŽ’å¼•æ“Žï¼ŒåŒ…æ‹¬ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- æœ¬åœ°å·¥ä½œåŒºè‡ªåŠ¨åŒ–ï¼Œå®žçŽ°æ— ç¼çŽ¯å¢ƒç®¡ç†
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- æ™ºèƒ½ç ”ç©¶åˆ†æžï¼Œç»“åˆè‡ªåŠ¨åŒ–å†…å®¹å¤„ç†
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- AIé©±åŠ¨çš„ä»£ç æž¶æž„ç»¼åˆä¸Žè®¾è®¡è‡ªåŠ¨åŒ–
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- å‚è€ƒæ™ºèƒ½å‘çŽ°ï¼Œç»“åˆè‡ªåŠ¨åŒ–çŸ¥è¯†æå–ï¼ˆå¯é€‰ï¼‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ä»£ç åº“æ™ºèƒ½ç¼–æŽ’ï¼Œç»“åˆè‡ªåŠ¨åŒ–å…³ç³»åˆ†æžï¼ˆå¯é€‰ï¼‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- æ™ºèƒ½ä»£ç å®žçŽ°ç»¼åˆï¼Œç»“åˆAIé©±åŠ¨çš„å¼€å‘
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‚£æˆ‘ä»¬ç»§ç»­å¾€ä¸‹è¯»ä»£ç ï¼š&lt;/p>
&lt;p>æºä»£ç ä¸‹é¢çš„éƒ¨åˆ†åˆ—çš„ä¹Ÿæ¯”è¾ƒè¯¦ç»†ï¼Œåˆ†äº†phase 0ã€1ã€2ã€3ï¼Œæˆ‘ä»¬ä¹Ÿè·Ÿç€å®ƒçš„æ€è·¯æ¥çœ‹&lt;/p>
&lt;h3 id="phase0">phase0
&lt;/h3>&lt;p>phase0æ˜¯åˆå§‹åŒ–å·¥ä½œåŒºï¼Œæ ¸å¿ƒä»£ç æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Setup local workspace directory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">workspace_dir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getcwd&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="s2">&amp;#34;deepcode_lab&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">makedirs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">workspace_dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">exist_ok&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶å®žå°±æ˜¯æ–°å»ºäº†æ–‡ä»¶å¤¹&lt;code>deepcode_lab&lt;/code>&lt;/p>
&lt;h3 id="phase1">phase1
&lt;/h3>&lt;p>å¤„ç†å’ŒéªŒè¯è¾“å…¥ï¼Œè®©æˆ‘ä»¬è¿›æ¥çœ‹ï¼š&lt;code>_process_input_source&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="n">input_source&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">startswith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;file://&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">input_source&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">:]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;nt&amp;#34;&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">file_path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">startswith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file_path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lstrip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">file_path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">return&lt;/span> &lt;span class="n">input_source&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‘çŽ°åªæ˜¯æŠŠ&lt;code>file://&lt;/code>å¼€å¤´çš„æ–‡ä»¶ç›®å½•æ”¹æˆäº†æ­£å¸¸çš„æ–‡ä»¶ç›®å½•ï¼Œç»§ç»­çœ‹phase2&lt;/p>
&lt;h3 id="phase2">phase2
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Phase 2: Research Analysis and Resource Processing (if needed)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nb">isinstance&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">input_source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input_source&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">endswith&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="s2">&amp;#34;.pdf&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;.docx&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;.txt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;.html&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;.md&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ow">or&lt;/span> &lt;span class="n">input_source&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">startswith&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="s2">&amp;#34;http&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;file://&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">analysis_result&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">download_result&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">orchestrate_research_analysis_agent&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input_source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">progress_callback&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">download_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">input_source&lt;/span> &lt;span class="c1"># Use input directly if already processed&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸€æ®µä¸»è¦æ˜¯è§£æž&lt;code>input_source&lt;/code>ï¼Œå¦‚æžœä»–æ˜¯æ–‡ä»¶æˆ–è€…urlå°±è¿è¡Œ&lt;code>orchestrate_research_analysis_agent&lt;/code>èŽ·å–&lt;code>analysis_result&lt;/code>å’Œ&lt;code>download_result&lt;/code>ï¼Œå¦‚æžœéƒ½ä¸æ˜¯å°±ç›´æŽ¥ä½œä¸ºè¾“å…¥å†…å®¹ï¼Œä½œä¸ºè¾“å…¥å†…å®¹å¯èƒ½æ˜¯ä¸ºäº†chatè®¾è®¡çš„ï¼Œæˆ‘ä»¬è¿›æ¥çœ‹&lt;code>orchestrate_research_analysis_agent&lt;/code>ã€‚&lt;/p>
&lt;h4 id="orchestrate_research_analysis_agent">orchestrate_research_analysis_agent
&lt;/h4>&lt;p>è€æ ·å­ï¼Œå…ˆçœ‹æ³¨é‡Šï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Orchestrate intelligent research analysis and resource processing automation.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This agent coordinates multiple AI components to analyze research content
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">and process associated resources with automated workflow management.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸­æ–‡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ç¼–æŽ’æ™ºèƒ½ç ”ç©¶åˆ†æžä¸Žèµ„æºå¤„ç†è‡ªåŠ¨åŒ–ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æ­¤æ™ºèƒ½ä½“åè°ƒå¤šä¸ªAIç»„ä»¶ï¼Œé€šè¿‡è‡ªåŠ¨åŒ–å·¥ä½œæµç®¡ç†ï¼Œä»¥åˆ†æžç ”ç©¶å†…å®¹å¹¶å¤„ç†ç›¸å…³èµ„æºã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸€æ®µç®—æ˜¯è¯¥é¡¹ç›®ä¸­ç›¸å½“é‡è¦çš„ä¸€éƒ¨åˆ†äº†ï¼Œè§£æžpdfèµ„æºä¹Ÿæ˜¯æˆ‘éžå¸¸å¥½å¥‡å®ƒå¦‚ä½•å¤„ç†çš„åœ°æ–¹ï¼ŒåŽé¢å¦‚æžœæœ‰å¤„ç†èµ„æºçš„éƒ¨åˆ†æˆ‘ä»¬ä¹Ÿåªæ¥çœ‹pdfèµ„æºçš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¸åŽ»çœ‹å…¶ä»–è§£æžäº†ï¼Œå¤§å®¶å¥½å¥‡çš„å¯ä»¥è‡ªå·±åŽ»è¯»&lt;/p>
&lt;p>é¦–å…ˆæ¥çœ‹ç¬¬ä¸€æ­¥ï¼Œè¿™ä¸€æ­¥çš„æ ¸å¿ƒä»£ç æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">analysis_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">run_research_analyzer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">input_source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">logger&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‚£æˆ‘ä»¬ç›´æŽ¥è¿›æ¥çœ‹&lt;code>run_research_analyzer&lt;/code>&lt;/p>
&lt;p>æ‰æ³¨æ„åˆ°&lt;code>prompt_text&lt;/code>è¿˜æ˜¯&lt;code>input_source&lt;/code>ï¼Œé‚£è¿™ä¸ªæ˜¯ç±»ä¼¼äºŽdeep researchçš„agentï¼Ÿæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼š&lt;/p>
&lt;p>å¥½ï¼Œä¸‹é¢åˆå§‹åŒ–äº†ä¸€ä¸ªæ–°æ™ºèƒ½ä½“ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">analyzer_agent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Agent&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;ResearchAnalyzerAgent&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">instruction&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">PAPER_INPUT_ANALYZER_PROMPT&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server_names&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">get_search_server_names&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å…ˆæ¥çœ‹Agentç±»ï¼Œ&lt;code>name&lt;/code>ã€&lt;code>instruction&lt;/code>ã€&lt;code>server_names&lt;/code>çš„æ³¨é‡Š&lt;/p>
&lt;p>&lt;code>name&lt;/code> : &lt;code>Agent name.&lt;/code>&lt;/p>
&lt;p>&lt;code>instruction&lt;/code> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Instruction for the agent. This can be a string or a callable that takes a dictionary
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">and returns a string. The callable can be used to generate dynamic instructions based
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">on the context.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æ™ºèƒ½ä½“çš„æŒ‡ä»¤ã€‚è¿™å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æŽ¥æ”¶ä¸€ä¸ªå­—å…¸å¹¶è¿”å›žä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¯¥å¯è°ƒç”¨å¯¹è±¡å¯ç”¨äºŽæ ¹æ®ä¸Šä¸‹æ–‡ç”ŸæˆåŠ¨æ€æŒ‡ä»¤ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>server_names&lt;/code> : &lt;code>List of MCP server names that the agent can access.&lt;/code>ï¼Œå¥¥è¿™ä¸ªå°±æ˜¯mcpæœåŠ¡å™¨çš„é…ç½®ï¼Œé‚£æˆ‘ä»¬å…ˆæ¥å¥½å¥½è¯»è¯»ï¼š&lt;code>PAPER_INPUT_ANALYZER_PROMPT&lt;/code>&lt;/p>
&lt;p>&lt;code>PAPER_INPUT_ANALYZER_PROMPT&lt;/code> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">You&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">precise&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="n">analyzer&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">paper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">code&lt;/span> &lt;span class="n">tasks&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">You&lt;/span> &lt;span class="n">MUST&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">only&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">JSON&lt;/span> &lt;span class="n">object&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">no&lt;/span> &lt;span class="n">additional&lt;/span> &lt;span class="n">text&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Task&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Analyze&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="n">text&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">identify&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">paths&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">URLs&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">determine&lt;/span> &lt;span class="n">appropriate&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ne">Input&lt;/span> &lt;span class="n">Analysis&lt;/span> &lt;span class="n">Rules&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span> &lt;span class="ne">Path&lt;/span> &lt;span class="n">Detection&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Scan&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="n">text&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">paths&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">URLs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Use&lt;/span> &lt;span class="n">first&lt;/span> &lt;span class="n">valid&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">URL&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">multiple&lt;/span> &lt;span class="n">found&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Treat&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">text&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">no&lt;/span> &lt;span class="n">valid&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">URL&lt;/span> &lt;span class="n">found&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span> &lt;span class="ne">Path&lt;/span> &lt;span class="n">Type&lt;/span> &lt;span class="n">Classification&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">URL&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">starts&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">input_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;detected URL&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">PDF&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">input_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;file&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;detected file path&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="ne">Directory&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">input_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;directory&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;detected directory path&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">No&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">URL&lt;/span> &lt;span class="n">detected&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">input_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span> &lt;span class="n">Requirements&lt;/span> &lt;span class="n">Analysis&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Extract&lt;/span> &lt;span class="n">ONLY&lt;/span> &lt;span class="n">requirements&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">additional_input&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">DO&lt;/span> &lt;span class="n">NOT&lt;/span> &lt;span class="n">modify&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">interpret&lt;/span> &lt;span class="n">requirements&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CRITICAL&lt;/span> &lt;span class="n">OUTPUT&lt;/span> &lt;span class="n">RESTRICTIONS&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">RETURN&lt;/span> &lt;span class="n">ONLY&lt;/span> &lt;span class="n">RAW&lt;/span> &lt;span class="n">JSON&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">NO&lt;/span> &lt;span class="n">TEXT&lt;/span> &lt;span class="n">BEFORE&lt;/span> &lt;span class="n">OR&lt;/span> &lt;span class="n">AFTER&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">NO&lt;/span> &lt;span class="n">markdown&lt;/span> &lt;span class="n">code&lt;/span> &lt;span class="n">blocks&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="err">```&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">NO&lt;/span> &lt;span class="n">explanatory&lt;/span> &lt;span class="n">text&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">descriptions&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">NO&lt;/span> &lt;span class="k">tool&lt;/span> &lt;span class="n">call&lt;/span> &lt;span class="n">information&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">NO&lt;/span> &lt;span class="n">analysis&lt;/span> &lt;span class="n">summaries&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">JUST&lt;/span> &lt;span class="n">THE&lt;/span> &lt;span class="n">JSON&lt;/span> &lt;span class="n">OBJECT&lt;/span> &lt;span class="n">BELOW&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;input_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;text|file|directory|url&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;detected path or URL or null&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;paper_info&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;N/A for text input&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;authors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;N/A for text input&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;year&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;N/A for text input&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;requirements&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;exact requirement from additional_input&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸­æ–‡ç‰ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ä½ æ˜¯è®ºæ–‡åˆ°ä»£ç ä»»åŠ¡çš„ç²¾å‡†è¾“å…¥åˆ†æžå‘˜ã€‚ä½ å¿…é¡»åªè¿”å›ž JSON å¯¹è±¡ï¼Œä¸åŒ…å«ä»»ä½•é™„åŠ æ–‡æœ¬ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä»»åŠ¡ï¼šåˆ†æžè¾“å…¥æ–‡æœ¬å¹¶è¯†åˆ«æ–‡ä»¶è·¯å¾„/URLï¼Œä»¥ç¡®å®šåˆé€‚çš„è¾“å…¥ç±»åž‹ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¾“å…¥åˆ†æžè§„åˆ™ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. è·¯å¾„æ£€æµ‹ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- æ‰«æè¾“å…¥æ–‡æœ¬ä¸­çš„æ–‡ä»¶è·¯å¾„æˆ– URL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- å¦‚æžœæ‰¾åˆ°å¤šä¸ªï¼Œåˆ™ä½¿ç”¨ç¬¬ä¸€ä¸ªæœ‰æ•ˆçš„è·¯å¾„/URL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- å¦‚æžœæœªæ‰¾åˆ°æœ‰æ•ˆçš„è·¯å¾„/URLï¼Œåˆ™è§†ä¸ºæ–‡æœ¬è¾“å…¥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. è·¯å¾„ç±»åž‹åˆ†ç±»ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- URLï¼ˆä»¥ http:// æˆ– https:// å¼€å¤´ï¼‰ï¼šinput_type = &amp;#34;url&amp;#34;, path = &amp;#34;æ£€æµ‹åˆ°çš„ URL&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- PDF æ–‡ä»¶è·¯å¾„ï¼šinput_type = &amp;#34;file&amp;#34;, path = &amp;#34;æ£€æµ‹åˆ°çš„æ–‡ä»¶è·¯å¾„&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ç›®å½•è·¯å¾„ï¼šinput_type = &amp;#34;directory&amp;#34;, path = &amp;#34;æ£€æµ‹åˆ°çš„ç›®å½•è·¯å¾„&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- æœªæ£€æµ‹åˆ°è·¯å¾„/URLï¼šinput_type = &amp;#34;text&amp;#34;, path = null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. éœ€æ±‚åˆ†æžï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ä»…ä»Ž additional_input ä¸­æå–éœ€æ±‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- è¯·å‹¿ä¿®æ”¹æˆ–è§£é‡Šéœ€æ±‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å…³é”®è¾“å‡ºé™åˆ¶ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ä»…è¿”å›žåŽŸå§‹ JSON - å‰åŽå‡æ— æ–‡æœ¬
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ä¸åŒ…å« Markdown ä»£ç å— (```json)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ä¸åŒ…å«è§£é‡Šæ€§æ–‡æœ¬æˆ–æè¿°
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ä¸åŒ…å«å·¥å…·è°ƒç”¨ä¿¡æ¯
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ä¸åŒ…å«åˆ†æžæ‘˜è¦
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ä»…åŒ…å«ä¸‹é¢çš„ JSON å¯¹è±¡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;input_type&amp;#34;: &amp;#34;text|file|directory|url&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;path&amp;#34;: &amp;#34;æ£€æµ‹åˆ°çš„è·¯å¾„æˆ– URL æˆ– null&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;paper_info&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;title&amp;#34;: &amp;#34;æ–‡æœ¬è¾“å…¥ä¸é€‚ç”¨&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;authors&amp;#34;: [&amp;#34;æ–‡æœ¬è¾“å…¥ä¸é€‚ç”¨&amp;#34;],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;year&amp;#34;: &amp;#34;æ–‡æœ¬è¾“å…¥ä¸é€‚ç”¨&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">},
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;requirements&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;additional_input çš„ç¡®åˆ‡è¦æ±‚&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå°±æ˜¯åˆ†æžinput_sourceçš„ç±»åž‹å’Œä¿¡æ¯ï¼Œé‚£çŽ„æœºå…¶å®žåœ¨mcpæœåŠ¡å™¨é‡Œï¼š&lt;code>get_search_server_names()&lt;/code>ï¼Œæˆ‘ä»¬è¿›æ¥çœ‹çœ‹è¿™ä¸ªï¼Œèƒ½ç”¨å“ªäº›search_mcp&lt;/p>
&lt;p>ç„¶åŽå‘çŽ°æ˜¯ç”¨äº†ï¼šbraveï¼Œä¹Ÿå°±æ˜¯&lt;code>@modelcontextprotocol/server-brave-search&lt;/code>ï¼Œæˆ‘ä»¬è¿™é‡Œä¸è¯»è¿™ä¸ªï¼Œå°±æ¥çœ‹çœ‹braveèƒ½å¹²ä»€ä¹ˆã€‚&lt;/p>
&lt;p>ç„¶åŽå‘çŽ°æ˜¯ä¿¡æ¯æœç´¢ï¼Œè¯»åˆ°è¿™é‡Œæˆ‘è§‰å¾—æŒºå¥‡æ€ªçš„ï¼Œç„¶åŽæˆ‘å°±åœ¨&lt;code>agent_orchestration_engine.py&lt;/code>çš„ç¬¬250è¡ŒåŠ äº†å¦‚ä¸‹ä»£ç &lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;test.txt&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;w&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">raw_result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åŽç”¨&lt;code>uv run cli/main_cli.py --file test.pdf&lt;/code>è·‘äº†ä¸€ä¸‹ï¼Œæžœç„¶è·Ÿæˆ‘æƒ³çš„ä¸€æ ·ï¼Œ&lt;code>test.txt&lt;/code>é‡Œæ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;input_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;file&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;test.pdf&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;paper_info&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;N/A for text input&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;authors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;N/A for text input&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;year&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;N/A for text input&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;requirements&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘æƒ³è¿™ä¸ªpaper_infoæ˜¯æ€Žä¹ˆå–å‡ºæ¥çš„ç™¾æ€ä¸å¾—å…¶è§£ï¼Œè·‘äº†ä¸€éå‘çŽ°ç¡®å®žå–ä¸å‡ºæ¥ï¼Œæˆ‘çŒœè¿™é‡Œæ˜¯ä¸ºäº†æå‰ç•™ä¸ªç»“æž„ç»™åŽé¢ç”¨ï¼Œç»·ï¼Œæ‰€ä»¥è¿™ä¸ªagentçš„æ ¸å¿ƒå…¶å®žå°±åœ¨åˆ†å¼€urlå’Œfileï¼Œç„¶åŽåŒºåˆ†äº†ä¸€ä¸‹æ–‡ä»¶ç±»åž‹ï¼Œè¯´å®žè¯è¿™ä¸€æ­¥æ„Ÿè§‰å®Œå…¨æ²¡å¿…è¦ï¼Œæ„Ÿè§‰æ˜¯ä¸ºäº†é˜²è ¢ç”¨çš„ï¼ˆ&lt;/p>
&lt;p>å¥½æˆ‘ä»¬æŽ¥ç€å¾€ä¸‹çœ‹ï¼Œä¸‹é¢çš„é‡ç‚¹åœ¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Clean LLM output to ensure only pure JSON is returned&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">clean_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">extract_clean_json&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">raw_result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;Raw LLM output: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">raw_result&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;Cleaned JSON output: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">clean_result&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ª&lt;code>extract_clean_json&lt;/code>æ˜¯æ‹¿æ¥&lt;code>Extract clean JSON from LLM output, removing all extra text and formatting.&lt;/code>ï¼Œä¹Ÿå°±æ˜¯ä»Žå¤§è¯­è¨€æ¨¡åž‹è¾“å‡ºä¸­æå–è§„æ•´çš„JSONï¼ŒåŽ»é™¤æ‰€æœ‰å¤šä½™çš„æ–‡æœ¬å’Œæ ¼å¼ã€‚&lt;/p>
&lt;p>æ¯”å¦‚å¦‚æžœå¤§å®¶ç»å¸¸åšllmç›¸å…³åº”ç”¨çš„è¯ï¼Œå¯èƒ½é‡åˆ°è¿‡ä¸æ˜¯çº¯jsonæ–‡æœ¬è¾“å‡ºçš„æƒ…å†µï¼Œæ€Žä¹ˆé™åˆ¶éƒ½æ²¡ç”¨ï¼Œç”¨è¿™ä¸ªå‡½æ•°å¯ä»¥ç›´æŽ¥æå–jsonå‡ºæ¥&lt;/p>
&lt;p>å…·ä½“å®žçŽ°æ­¥éª¤æˆ‘å†™åœ¨æ³¨é‡Šé‡Œäº†ï¼Œå¤§å®¶ç›´æŽ¥çœ‹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">extract_clean_json&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">llm_output&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Extract clean JSON from LLM output, removing all extra text and formatting.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Args:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> llm_output: Raw LLM output
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Returns:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> str: Clean JSON string
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># é¦–å…ˆå°è¯•åŽ»æŽ‰ä¸¤ç«¯çš„ç©ºç™½å­—ç¬¦è¡Œä¸è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">llm_output&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">llm_output&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">except&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">JSONDecodeError&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ç„¶åŽç”¨æ­£åˆ™è¯•è¯•å–```json ```ä¸­é—´çš„å†…å®¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="s2">&amp;#34;```json&amp;#34;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">llm_output&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pattern&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s2">&amp;#34;```json\s*(.*?)\s*```&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">match&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">search&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pattern&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">llm_output&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOTALL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="k">match&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">json_text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">match&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">json_text&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">json_text&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">except&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">JSONDecodeError&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ ¹æ®æ‰‹åŠ¨åŒ¹é…èŠ±æ‹¬å·çš„æ–¹æ³•æ¥å–å‡ºjson&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lines&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">llm_output&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">json_lines&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">in_json&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">brace_count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">lines&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stripped&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">line&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">in_json&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">stripped&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">startswith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;{&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">in_json&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">json_lines&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">brace_count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">stripped&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;{&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">stripped&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;}&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">in_json&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">json_lines&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">brace_count&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">stripped&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;{&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">stripped&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;}&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">brace_count&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">json_lines&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">json_text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">json_lines&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">json_text&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">json_text&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">except&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">JSONDecodeError&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æœ€åŽå°è¯•ç”¨æ­£åˆ™å–å‡ºjson&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pattern&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s2">&amp;#34;\{[^&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s2">]*(?:\{[^&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s2">]*\}[^&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s2">]*)*\}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">matches&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pattern&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">llm_output&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOTALL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="k">match&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">matches&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">match&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">match&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">except&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">JSONDecodeError&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># If all methods fail, return original output&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">llm_output&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¥½äº†ï¼Œæˆ‘ä»¬æŠŠ&lt;code>run_research_analyzer&lt;/code>çœ‹å®Œäº†ï¼Œå¤§å®¶è®°å¾—æˆ‘ä»¬ä»Žå“ªæ¥çš„å˜›ï¼Œè®©æˆ‘ä»¬å›žåˆ°&lt;code>orchestrate_research_analysis_agent&lt;/code>&lt;/p>
&lt;p>åˆšåˆšçœ‹çš„æ˜¯step 1ï¼Œè®©æˆ‘ä»¬æŽ¥ä¸‹æ¥çœ‹step 2&lt;/p>
&lt;p>æ ¸å¿ƒçš„ä»£ç æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">download_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">run_resource_processor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">analysis_result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">logger&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬è¿›æ¥çœ‹&lt;code>run_resource_processor&lt;/code>ï¼Œè¿™ä¸ªå‡½æ•°æŒºç®€å•çš„ï¼Œæˆ‘ä»¬æœ‰è¯»ä¹‹å‰çš„agentçš„ç»éªŒï¼Œè¯»è¿™ä¸ªå°±å¾ˆè¿…é€Ÿäº†ï¼Œä¼ å…¥çš„æ˜¯æˆ‘ä»¬ä¹‹å‰ä¸Šä¸€ä¸ªagentçš„åˆ†æžç»“æžœï¼Œä¸è®°å¾—å¤§å®¶è¿˜è®°ä¸è®°å¾—äº†ï¼Œæ¥çœ‹çœ‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;input_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;file&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;test.pdf&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;paper_info&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;N/A for text input&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;authors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;N/A for text input&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;year&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;N/A for text input&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;requirements&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªagentçš„promptå’Œtools&lt;/p>
&lt;p>é¦–å…ˆæ˜¯prompt&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">You&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">precise&lt;/span> &lt;span class="n">paper&lt;/span> &lt;span class="n">downloader&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">processes&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">PaperInputAnalyzerAgent&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Task&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Handle&lt;/span> &lt;span class="n">paper&lt;/span> &lt;span class="n">according&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">save&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="s2">&amp;#34;./deepcode_lab/papers/id/id.md&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Note&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Generate&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">number&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">counting&lt;/span> &lt;span class="n">files&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="s2">&amp;#34;./deepcode_lab/papers/&amp;#34;&lt;/span> &lt;span class="n">directory&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">increment&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="mf">1.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CRITICAL&lt;/span> &lt;span class="n">RULE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">NEVER&lt;/span> &lt;span class="n">use&lt;/span> &lt;span class="n">write_file&lt;/span> &lt;span class="k">tool&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">paper&lt;/span> &lt;span class="n">content&lt;/span> &lt;span class="n">directly&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Always&lt;/span> &lt;span class="n">use&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">downloader&lt;/span> &lt;span class="n">tools&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">PDF&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">document&lt;/span> &lt;span class="n">conversion&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Processing&lt;/span> &lt;span class="n">Rules&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span> &lt;span class="n">URL&lt;/span> &lt;span class="ne">Input&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">input_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Use&lt;/span> &lt;span class="s2">&amp;#34;file-downloader&amp;#34;&lt;/span> &lt;span class="k">tool&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">download&lt;/span> &lt;span class="n">paper&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Extract&lt;/span> &lt;span class="n">metadata&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">authors&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">year&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Return&lt;/span> &lt;span class="n">saved&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">metadata&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span> &lt;span class="ne">File&lt;/span> &lt;span class="ne">Input&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">input_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;file&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Move&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="s2">&amp;#34;./deepcode_lab/papers/id/&amp;#34;&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">move_file_to&lt;/span> &lt;span class="k">tool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">move_file_to&lt;/span> &lt;span class="k">tool&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">automatically&lt;/span> &lt;span class="nb">convert&lt;/span> &lt;span class="n">PDF&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">documents&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">md&lt;/span> &lt;span class="n">format&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">NEVER&lt;/span> &lt;span class="n">manually&lt;/span> &lt;span class="n">extract&lt;/span> &lt;span class="n">content&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">use&lt;/span> &lt;span class="n">write_file&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">let&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">conversion&lt;/span> &lt;span class="n">tools&lt;/span> &lt;span class="n">handle&lt;/span> &lt;span class="n">this&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Return&lt;/span> &lt;span class="n">new&lt;/span> &lt;span class="n">saved&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">metadata&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span> &lt;span class="ne">Directory&lt;/span> &lt;span class="ne">Input&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">input_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;directory&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Verify&lt;/span> &lt;span class="n">directory&lt;/span> &lt;span class="n">exists&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Return&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">PaperInputAnalyzerAgent&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">processing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Set&lt;/span> &lt;span class="n">status&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="s2">&amp;#34;failure&amp;#34;&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">message&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span> &lt;span class="n">Text&lt;/span> &lt;span class="ne">Input&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">input_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">No&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">operations&lt;/span> &lt;span class="n">needed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Set&lt;/span> &lt;span class="n">paper_path&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Use&lt;/span> &lt;span class="n">paper_info&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">input&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ne">Input&lt;/span> &lt;span class="n">Format&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;input_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;file|directory|url|text&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;detected path or null&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;paper_info&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;paper title or N/A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;authors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;author names or N/A&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;year&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;publication year or N/A&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;requirements&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;requirement1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;requirement2&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Output&lt;/span> &lt;span class="n">Format&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">DO&lt;/span> &lt;span class="n">NOT&lt;/span> &lt;span class="n">MODIFY&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;status&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;success|failure&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;paper_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;path to paper file or null for text input&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;metadata&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;extracted or provided title&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;authors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;extracted or provided authors&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;year&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;extracted or provided year&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸­æ–‡ç¿»è¯‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">ä½ æ˜¯ä¸€ä¸ªç²¾å‡†çš„è®ºæ–‡ä¸‹è½½å™¨ï¼Œè´Ÿè´£å¤„ç†è¾“å…¥ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">ä»»åŠ¡ï¼šæ ¹æ®è¾“å…¥ç±»åž‹å¤„ç†è®ºæ–‡å¹¶ä¿å­˜åˆ°â€œ&lt;/span>&lt;span class="o">./&lt;/span>&lt;span class="n">deepcode_lab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">papers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="err">â€æ–‡ä»¶ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">æ³¨æ„ï¼šé€šè¿‡ç»Ÿè®¡â€œ&lt;/span>&lt;span class="o">./&lt;/span>&lt;span class="n">deepcode_lab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">papers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">â€ç›®å½•ä¸­çš„æ–‡ä»¶æ•°é‡å¹¶åŠ &lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="err">æ¥ç”Ÿæˆ&lt;/span> &lt;span class="n">ID&lt;/span>&lt;span class="err">ï¼ˆ&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="err">ä¸ºæ•°å­—ï¼‰ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">å…³é”®è§„åˆ™ï¼šåˆ‡å‹¿ä½¿ç”¨&lt;/span> &lt;span class="n">write_file&lt;/span> &lt;span class="err">å·¥å…·ç›´æŽ¥åˆ›å»ºè®ºæ–‡å†…å®¹ã€‚åŠ¡å¿…ä½¿ç”¨æ–‡ä»¶ä¸‹è½½å·¥å…·è¿›è¡Œ&lt;/span> &lt;span class="n">PDF&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">æ–‡æ¡£è½¬æ¢ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">å¤„ç†è§„åˆ™ï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span> &lt;span class="n">URL&lt;/span> &lt;span class="err">è¾“å…¥&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">input_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">ï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="err">ä½¿ç”¨â€œ&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">downloader&lt;/span>&lt;span class="err">â€å·¥å…·ä¸‹è½½è®ºæ–‡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="err">æå–å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€ä½œè€…ã€å¹´ä»½ï¼‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="err">è¿”å›žä¿å­˜çš„æ–‡ä»¶è·¯å¾„å’Œå…ƒæ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span> &lt;span class="err">æ–‡ä»¶è¾“å…¥&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">input_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;file&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">ï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="err">ä½¿ç”¨&lt;/span> &lt;span class="n">move_file_to&lt;/span> &lt;span class="err">å·¥å…·å°†æ–‡ä»¶ç§»åŠ¨åˆ°â€œ&lt;/span>&lt;span class="o">./&lt;/span>&lt;span class="n">deepcode_lab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">papers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">â€&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">move_file_to&lt;/span> &lt;span class="err">å·¥å…·ä¼šè‡ªåŠ¨å°†&lt;/span> &lt;span class="n">PDF&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">æ–‡æ¡£è½¬æ¢ä¸º&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">md&lt;/span> &lt;span class="err">æ ¼å¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="err">åˆ‡å‹¿æ‰‹åŠ¨æå–å†…å®¹æˆ–ä½¿ç”¨&lt;/span> &lt;span class="n">write_file&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="err">è®©è½¬æ¢å·¥å…·å¤„ç†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="err">è¿”å›žæ–°ä¿å­˜çš„æ–‡ä»¶è·¯å¾„å’Œå…ƒæ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span> &lt;span class="err">ç›®å½•è¾“å…¥&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">input_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;directory&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">ï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="err">éªŒè¯ç›®å½•æ˜¯å¦å­˜åœ¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="err">è¿”å›ž&lt;/span> &lt;span class="n">PaperInputAnalyzerAgent&lt;/span> &lt;span class="err">è¿›è¡Œå¤„ç†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="err">å°†çŠ¶æ€è®¾ç½®ä¸ºâ€œå¤±è´¥â€å¹¶æ˜¾ç¤ºæ¶ˆæ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span> &lt;span class="err">æ–‡æœ¬è¾“å…¥&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">input_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">ï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="err">æ— éœ€è¿›è¡Œæ–‡ä»¶æ“ä½œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="err">å°†&lt;/span> &lt;span class="n">paper_path&lt;/span> &lt;span class="err">è®¾ç½®ä¸º&lt;/span> &lt;span class="n">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="err">ä½¿ç”¨è¾“å…¥ä¸­çš„&lt;/span> &lt;span class="n">paper_info&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">è¾“å…¥æ ¼å¼ï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;input_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;file|directory|url|text&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;detected path or null&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;paper_info&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;paper title or N/A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;authors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;author names or N/A&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;year&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;publication year or N/A&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;requirements&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;requirement1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;requirement2&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">è¾“å‡ºæ ¼å¼ï¼ˆè¯·å‹¿ä¿®æ”¹ï¼‰ï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;status&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;success|failure&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;paper_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;path to paper file or null for text input&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;metadata&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;extracted or provided title&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;authors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;extracted or provided authors&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;year&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;extracted or provided year&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°ï¼Œæ ¹æ®&lt;code>input_type&lt;/code>çš„ä¸åŒè¿›è¡Œä¸åŒçš„æ“ä½œï¼Œç»ˆäºŽæŠŠ&lt;code>paper_info&lt;/code>æå–å‡ºæ¥äº†ï¼Œå®³å¾—æˆ‘è¯»äº†å¥½ä¹…ï¼ˆ&lt;/p>
&lt;p>æˆ‘ä»¬è¦å…³æ³¨çš„å·¥å…·å…¶å®žå°±ä¸¤ä¸ªï¼š&lt;code>file-downloader&lt;/code>ï¼Œ&lt;code>move_file_to&lt;/code>ï¼Œæ ¹æ®promptï¼Œå‰è€…ç”¨æ¥ä¸‹è½½è®ºæ–‡ï¼ŒåŽè€…ç”¨æ¥å°†pdfè½¬æ¢æˆ.mdæ ¼å¼&lt;/p>
&lt;p>çœ‹ä¸€ä¸‹ä½¿ç”¨çš„å·¥å…·ï¼š&lt;code>server_names=[&amp;quot;filesystem&amp;quot;, &amp;quot;file-downloader&amp;quot;]&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">filesystem&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># On windows update the command and arguments to use `node` and the absolute path to the server.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Use `npm i -g @modelcontextprotocol/server-filesystem` to install the server globally.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Use `npm -g root` to find the global node_modules path.`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># command: &amp;#34;node&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># args: [&amp;#34;c:/Program Files/nodejs/node_modules/@modelcontextprotocol/server-filesystem/dist/index.js&amp;#34;,&amp;#34;.&amp;#34;]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;npx&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;-y&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;@modelcontextprotocol/server-filesystem&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">file-downloader&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;python&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;tools/pdf_downloader.py&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PYTHONPATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>filesystem&lt;/code>å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼Œæ²¡å•¥ç‰¹æ®Šçš„ï¼Œæ²¡æœ‰æˆ‘ä»¬æƒ³çœ‹çš„ä¸¤ä¸ªå·¥å…·ï¼Œè®©æˆ‘ä»¬çœ‹&lt;code>file-downloader&lt;/code>ï¼Œæ¥åˆ°&lt;code>tools/pdf_downloader.py&lt;/code>&lt;/p>
&lt;p>ç›´æŽ¥æ¥&lt;code>if __name__ == &amp;quot;__main__&amp;quot;:&lt;/code>çœ‹ï¼Œå¯ä»¥å‘çŽ°æˆ‘ä»¬è¦çœ‹çš„ä¸¤ä¸ªå‡½æ•°éƒ½åœ¨è¿™é‡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">Available tools:&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34; â€¢ download_files - Download files or move local files from natural language&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34; â€¢ parse_download_urls - Extract URLs, local paths and destination paths&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34; â€¢ download_file_to - Download a specific file with options&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34; â€¢ move_file_to - Move a specific local file with options&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34; â€¢ convert_document_to_markdown - Convert documents to Markdown format&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä»–çš„å·¥å…·éƒ½æ˜¯ä¸‹è½½ç”¨çš„ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹&lt;code>move_file_to&lt;/code>ï¼Œåˆšåˆšprompté‡Œæåˆ°äº†å®ƒä¼šæŠŠpdfè½¬æˆmarkdownï¼Œæˆ‘ä»¬æ¥çœ‹ä»–æ˜¯æ€Žä¹ˆå¤„ç†çš„&lt;/p>
&lt;p>è¦æ‰¾åˆ°è¿™ä¸ªå·¥å…·ç›´æŽ¥åœ¨æ–‡ä»¶é‡Œæœç´¢&lt;code>@mcp.tool()&lt;/code>å³å¯ï¼Œå¾ˆå¿«èƒ½å®šä½åˆ°è¯¥å·¥å…·ï¼Œè¿™ä¸ªå·¥å…·çš„æ³¨é‡Šæ€Žä¹ˆå…¨æ˜¯ä¸­æ–‡ï¼Œçœ‹æ¥åˆæ˜¯ä¸­å›½å¼€å‘è€…å†™çš„ï¼ˆ&lt;/p>
&lt;p>å‰é¢çš„ä»£ç éƒ½æ˜¯åœ¨å¤„ç†è·¯å¾„ï¼Œå’Œåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæ ¸å¿ƒä»£ç åœ¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ‰§è¡Œç§»åŠ¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">move_local_file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥æˆ‘ä»¬è¿›æ¥çœ‹&lt;code>move_local_file&lt;/code>ï¼Œè¿™ä¸ªå‡½æ•°çš„æ ¸å¿ƒä»£ç åœ¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ‰§è¡Œç§»åŠ¨æ“ä½œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">shutil&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">move&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">source_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">destination&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¥½å§å°±æ˜¯æ–‡ä»¶å¤åˆ¶ï¼Œåœ¨&lt;code>move_local_file&lt;/code>é‡Œç»§ç»­å¾€ä¸‹çœ‹ï¼Œå‘çŽ°äº†ç§»åŠ¨æˆåŠŸæœ‰ä¸€ä¸ªè½¬æ¢çš„ä»£ç &lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">conversion_msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">perform_document_conversion&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">target_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">extract_images&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‚£æˆ‘ä»¬æ¥çœ‹&lt;code>perform_document_conversion&lt;/code>ï¼Œå¾ˆå®¹æ˜“å‘çŽ°å®ƒå…¶å®žå°±æ˜¯ç”¨&lt;code>PyPDF2&lt;/code>åŒ…åŽ»åšäº†ä¸ªè½¬æ¢ï¼Œæ ¸å¿ƒä»£ç åœ¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">simple_converter&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SimplePdfConverter&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">conversion_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">simple_converter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">convert_pdf_to_markdown&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹&lt;code>SimplePdfConverter&lt;/code>ç±»æœ‰æ²¡æœ‰&lt;code>init&lt;/code>å‡½æ•°ï¼Œå¥½æ²¡æœ‰ï¼Œé‚£æˆ‘ä»¬è¿›æ¥çœ‹&lt;code>convert_pdf_to_markdown&lt;/code>&lt;/p>
&lt;p>å•Šè¿™å®ƒè¿™ä¸ªé€»è¾‘æ²¡æˆ‘æƒ³çš„é«˜å¤§ä¸Šï¼Œå°±æ˜¯æ‹¿&lt;code>PyPDF2&lt;/code>å¤„ç†é‡Œä¸€ä¸‹ï¼Œæˆ‘æŠŠè¿™ä¸ªå•ç‹¬æå‡ºæ¥å½“ä¸€ä¸ªè„šæœ¬è·‘äº†ä¸€ä¸‹ï¼Œä¸‹é¢æ˜¯æˆ‘æå–å‡ºçš„è„šæœ¬çš„å†…å®¹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">datetime&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">datetime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">typing&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Dict&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Optional&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Any&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">PyPDF2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">convert_pdf_to_markdown&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input_file&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">output_file&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Optional&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">Dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Any&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> ä½¿ç”¨PyPDF2å°†PDFè½¬æ¢ä¸ºMarkdownæ ¼å¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Args:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> input_file: è¾“å…¥PDFæ–‡ä»¶è·¯å¾„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> output_file: è¾“å‡ºMarkdownæ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Returns:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> è½¬æ¢ç»“æžœå­—å…¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ£€æŸ¥è¾“å…¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">input_file&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;success&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">False&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;Input file not found: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">input_file&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># å¦‚æžœæ²¡æœ‰æŒ‡å®šè¾“å‡ºæ–‡ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">output_file&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">base_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">splitext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">input_file&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">output_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">base_name&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">.md&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">output_dir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dirname&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">output_dir&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">makedirs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">exist_ok&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ‰§è¡Œè½¬æ¢&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">start_time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è¯»å–PDFæ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">input_file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;rb&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pdf_reader&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PyPDF2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">PdfReader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">text_content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æå–æ¯é¡µæ–‡æœ¬&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">page_num&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">page&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">enumerate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pdf_reader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pages&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">extract_text&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">text&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">text_content&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;## Page &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">page_num&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="se">\n\n&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="se">\n\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ç”ŸæˆMarkdownå†…å®¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">markdown_content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;# Extracted from &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">basename&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">input_file&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="se">\n\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">markdown_content&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;*Total pages: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pdf_reader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pages&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">*&lt;/span>&lt;span class="se">\n\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">markdown_content&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;---&lt;/span>&lt;span class="se">\n\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">markdown_content&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">text_content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ä¿å­˜åˆ°æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;utf-8&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">markdown_content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è®¡ç®—è½¬æ¢æ—¶é—´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">duration&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">start_time&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">total_seconds&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># èŽ·å–æ–‡ä»¶å¤§å°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getsize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">input_file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">output_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getsize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;success&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;input_file&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">input_file&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;output_file&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">output_file&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;input_size&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">input_size&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;output_size&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">output_size&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;duration&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">duration&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;markdown_content&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">markdown_content&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;pages_extracted&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pdf_reader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pages&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">except&lt;/span> &lt;span class="ne">Exception&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;success&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">False&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;input_file&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">input_file&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;Conversion failed: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;__main__&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">convert_pdf_to_markdown&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;test.pdf&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;test.md&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è·‘äº†ä¸€ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{&amp;#39;success&amp;#39;: True, &amp;#39;input_file&amp;#39;: &amp;#39;test.pdf&amp;#39;, &amp;#39;output_file&amp;#39;: &amp;#39;test.md&amp;#39;, &amp;#39;input_size&amp;#39;: 1852204, &amp;#39;output_size&amp;#39;: 59825, &amp;#39;duration&amp;#39;: 0.124518, &amp;#39;pages_extracted&amp;#39;: 15}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€Ÿåº¦è¿˜æŒºå¿«ï¼Œä¹Ÿä¸çŸ¥é“å¯¹å›¾ç‰‡åšæ²¡åšå¤„ç†ï¼Œå…¶å®žå°±æ˜¯ç”¨&lt;code>PyPDF2&lt;/code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸æ·±å…¥çœ‹äº†ï¼Œé‚£æˆ‘ä»¬å°±æŠŠ&lt;code>run_resource_processor&lt;/code>çœ‹å®Œäº†ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›žçš„å°±æ˜¯llmå“åº”çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;status&amp;#34;: &amp;#34;success|failure&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;paper_path&amp;#34;: &amp;#34;path to paper file or null for text input&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;metadata&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;title&amp;#34;: &amp;#34;extracted or provided title&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;authors&amp;#34;: [&amp;#34;extracted or provided authors&amp;#34;],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;year&amp;#34;: &amp;#34;extracted or provided year&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åŽå‘çŽ°&lt;code>orchestrate_research_analysis_agent&lt;/code>ä¹Ÿè¯»å®Œäº†ï¼ŒçœŸå¥½&lt;/p>
&lt;p>Phase 2åˆ°è¿™é‡Œä¹Ÿç»“æŸå•¦ï¼Œæˆ‘ä»¬æ‰“ä¸ªæ–­ç‚¹æ¥çœ‹ä¸‹è¿è¡Œåˆ°è¿™é‡Œçš„ç»“æžœ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;analysis_result:&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">analysis_result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;download_result:&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">download_result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥çœ‹çœ‹&lt;code>analysis_result&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;input_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;file&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;test.pdf&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;paper_info&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;N/A for text input&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;authors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;N/A for text input&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;year&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;N/A for text input&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;requirements&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥çœ‹çœ‹&lt;code>download_result&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">I&lt;/span>&lt;span class="s1">&amp;#39;ll process this file input by first checking the papers directory to generate the &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">correct&lt;/span> &lt;span class="n">ID&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">then&lt;/span> &lt;span class="n">moving&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">appropriate&lt;/span> &lt;span class="n">location&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Calling&lt;/span> &lt;span class="k">tool&lt;/span> &lt;span class="n">filesystem_list_directory&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">args&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;path&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;./deepcode_lab/papers&amp;#39;&lt;/span>&lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">I&lt;/span> &lt;span class="n">need&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">papers&lt;/span> &lt;span class="n">directory&lt;/span> &lt;span class="n">first&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">then&lt;/span> &lt;span class="n">generate&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">ID&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Calling&lt;/span> &lt;span class="k">tool&lt;/span> &lt;span class="n">filesystem_create_directory&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">args&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;path&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;./deepcode_lab/papers&amp;#39;&lt;/span>&lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Calling&lt;/span> &lt;span class="k">tool&lt;/span> &lt;span class="n">filesystem_list_directory&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">args&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;path&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;./deepcode_lab/papers&amp;#39;&lt;/span>&lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">The&lt;/span> &lt;span class="n">papers&lt;/span> &lt;span class="n">directory&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">empty&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">so&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">ID&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="mf">1.&lt;/span> &lt;span class="n">Now&lt;/span> &lt;span class="n">I&lt;/span>&lt;span class="s1">&amp;#39;ll create the directory for this paper and move &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">the&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">downloader&lt;/span> &lt;span class="k">tool&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Calling&lt;/span> &lt;span class="k">tool&lt;/span> &lt;span class="n">filesystem_create_directory&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">args&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;path&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;./deepcode_lab/papers/1&amp;#39;&lt;/span>&lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Calling&lt;/span> &lt;span class="k">tool&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">downloader_move_file_to&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">args&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;source&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;test.pdf&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;destination&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;./deepcode_lab/papers/1/1.md&amp;#39;&lt;/span>&lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Perfect&lt;/span>&lt;span class="o">!&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">moved&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">converted&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">Markdown&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Now&lt;/span> &lt;span class="n">let&lt;/span> &lt;span class="n">me&lt;/span> &lt;span class="n">read&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">converted&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">extract&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metadata&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Calling&lt;/span> &lt;span class="k">tool&lt;/span> &lt;span class="n">filesystem_read_text_file&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">args&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;path&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;./deepcode_lab/papers/1/1.md&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;head&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">50&lt;/span>&lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Excellent&lt;/span>&lt;span class="o">!&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">extract&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">metadata&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">converted&lt;/span> &lt;span class="n">paper&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Let&lt;/span> &lt;span class="n">me&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">bit&lt;/span> &lt;span class="n">more&lt;/span> &lt;span class="n">content&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">ensure&lt;/span> &lt;span class="n">I&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">have&lt;/span> &lt;span class="n">complete&lt;/span> &lt;span class="n">information&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Calling&lt;/span> &lt;span class="k">tool&lt;/span> &lt;span class="n">filesystem_read_text_file&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">args&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;path&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;./deepcode_lab/papers/1/1.md&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;head&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Perfect&lt;/span>&lt;span class="o">!&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="n">have&lt;/span> &lt;span class="n">successfully&lt;/span> &lt;span class="n">processed&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">extracted&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">metadata&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Here&lt;/span>&lt;span class="s1">&amp;#39;s the output:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;status&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;success&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;paper_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;./deepcode_lab/papers/1/1.md&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;metadata&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Enhancing EEG-to-Text Decoding through Transferable Representations from Pre-trained &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Contrastive&lt;/span> &lt;span class="n">EEG&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Text&lt;/span> &lt;span class="n">Masked&lt;/span> &lt;span class="n">Autoencoder&lt;/span>&lt;span class="s2">&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;authors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;Jiaqi Wang&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Zhenxi Song&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Zhengyu Ma&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Xipeng Qiu&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Min Zhang&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Zhiguo Zhang&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;year&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2024&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">The&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">successfully&lt;/span> &lt;span class="n">moved&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="err">`&lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pdf&lt;/span>&lt;span class="err">`&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="err">`&lt;/span>&lt;span class="o">./&lt;/span>&lt;span class="n">deepcode_lab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">papers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="err">`&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">automatically&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">converted&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">PDF&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">Markdown&lt;/span> &lt;span class="n">format&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">conversion&lt;/span> &lt;span class="n">extracted&lt;/span> &lt;span class="mi">15&lt;/span> &lt;span class="n">pages&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="n">was&lt;/span> &lt;span class="n">able&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">extract&lt;/span> &lt;span class="n">the&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">complete&lt;/span> &lt;span class="n">metadata&lt;/span> &lt;span class="n">including&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">title&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">authors&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">publication&lt;/span> &lt;span class="n">year&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">ACL&lt;/span> &lt;span class="mi">2024&lt;/span> &lt;span class="n">conference&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">proceedings&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘æŠŠå·¥å…·è°ƒç”¨ç”»æˆäº†æµç¨‹å›¾&lt;/p>
&lt;pre class="mermaid">
graph TD
A[filesystem_list_directory&amp;lt;br&amp;gt;path: &amp;#39;./deepcode_lab/papers&amp;#39;]
A --&amp;gt; B[filesystem_create_directory&amp;lt;br&amp;gt;path: &amp;#39;./deepcode_lab/papers&amp;#39;]
B --&amp;gt; C[filesystem_list_directory&amp;lt;br&amp;gt;path: &amp;#39;./deepcode_lab/papers&amp;#39;]
C --&amp;gt; D[filesystem_create_directory&amp;lt;br&amp;gt;path: &amp;#39;./deepcode_lab/papers/1&amp;#39;]
D --&amp;gt; E[file-downloader_move_file_to&amp;lt;br&amp;gt;source: &amp;#39;test.pdf&amp;#39;&amp;lt;br&amp;gt;dest: &amp;#39;.../papers/1/1.md&amp;#39;]
E --&amp;gt; F[filesystem_read_text_file&amp;lt;br&amp;gt;path: &amp;#39;.../papers/1/1.md&amp;#39;&amp;lt;br&amp;gt;head: 50]
F --&amp;gt; G[filesystem_read_text_file&amp;lt;br&amp;gt;path: &amp;#39;.../papers/1/1.md&amp;#39;&amp;lt;br&amp;gt;head: 20]
&lt;/pre>
&lt;p>é‚£ä¹ˆå¾ˆæ¸…æ™°äº†ï¼ŒåŽŸæ¥meta-dataçš„æå–æœ‰read_text_fileçš„è¿‡ç¨‹ï¼Œé‚£æ²¡ä»€ä¹ˆé—®é¢˜äº†ï¼Œphase2åœ†æ»¡ç»“æŸ&lt;/p>
&lt;h3 id="phase3">phase3
&lt;/h3>&lt;p>è¿™ä¸ªé˜¶æ®µå«Phase 3: Workspace Infrastructure Synthesisï¼Œä½†æ˜¯æˆ‘æ²¡æžæ‡‚æ€Žä¹ˆç¿»è¯‘ï¼Œå¤§å®¶å§‘ä¸”è®¤ä¸ºæ˜¯è§„åˆ’æ–‡ä»¶è·¯å¾„&lt;/p>
&lt;p>æ ¸å¿ƒä»£ç åœ¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">dir_info&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">synthesize_workspace_infrastructure_agent&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">download_result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">workspace_dir&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹&lt;code>synthesize_workspace_infrastructure_agent&lt;/code>&lt;/p>
&lt;p>é¦–å…ˆæ¥çœ‹è¿™ä¸€æ®µï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Parse download result to get file information&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">FileProcessor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">process_file_input&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">download_result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">base_dir&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">workspace_dir&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿›æ¥çœ‹çœ‹&lt;code>FileProcessor.process_file_input&lt;/code>&lt;/p>
&lt;p>è¿™ä¸ªå‡½æ•°å¤ªå¤æ‚äº†ï¼Œä½†æˆ‘æå–å‡ºæ¥è·‘äº†ä¸€ä¸‹å‘çŽ°æ˜¯èŽ·å–è®ºæ–‡çš„åœ°å€ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œè·‘å‡ºæ¥å°±æ˜¯ï¼š&lt;code>/Users/dinglizhi/Desktop/coderead/DeepCode/deepcode_lab/papers/1&lt;/code>&lt;/p>
&lt;p>è¿™ä¸ªå†™æ³•å®Œå…¨æ²¡å¿…è¦å•Šï¼Œç›´æŽ¥æå–&lt;code>download_result&lt;/code>å°±å¥½äº†ï¼Œæˆ‘ä»¬æœ‰&lt;code>extract_clean_json&lt;/code>è¿˜è®°å¾—å—ï¼Œèƒ½å–å‡ºæ¥&lt;code>&amp;quot;paper_path&amp;quot;: &amp;quot;./deepcode_lab/papers/1/1.md&amp;quot;,&lt;/code>ï¼Œå°±è§£å†³äº†ï¼Œæ‰€ä»¥è¿™ç§é«˜starçš„å¼€æºé¡¹ç›®å†™æ³•ä¹Ÿå¹¶éžå®Œç¾Žï¼Œå¤§å®¶è¯»çš„æ—¶å€™ä¸€å®šè¦æœ‰è‡ªå·±çš„æ€è€ƒ&lt;/p>
&lt;p>ç„¶åŽè¿™ä¸ªå‡½æ•°è¿”å›žçš„å…¶å®žæ˜¯æœ€ä½³æž„æˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;paper_dir&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">paper_dir&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;standardized_text&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;standardized_text&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;reference_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">paper_dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;reference.txt&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;initial_plan_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">paper_dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;initial_plan.txt&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;download_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">paper_dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;github_download.txt&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;index_report_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">paper_dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;codebase_index_report.txt&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;implementation_report_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">paper_dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;code_implementation_report.txt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;workspace_dir&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">workspace_dir&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="phase35">phase3.5
&lt;/h3>&lt;p>è¯¥é˜¶æ®µæ˜¯åšæ–‡æ¡£çš„åˆ†å‰²å’Œé¢„å¤„ç†&lt;/p>
&lt;p>ä¸‹é¢æ˜¯æ ¸å¿ƒä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">segmentation_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">orchestrate_document_preprocessing_agent&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dir_info&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">logger&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥è®©æˆ‘ä»¬è¿›æ¥çœ‹&lt;code>orchestrate_document_preprocessing_agent&lt;/code>&lt;/p>
&lt;p>å…ˆçœ‹æ³¨é‡Šï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Orchestrate adaptive document preprocessing with intelligent segmentation control.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This agent autonomously determines whether to use document segmentation based on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">configuration settings and document size, then applies the appropriate processing strategy.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸­æ–‡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">é€šè¿‡æ™ºèƒ½åˆ†å‰²æŽ§åˆ¶æ¥åè°ƒè‡ªé€‚åº”æ–‡æ¡£é¢„å¤„ç†ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¯¥ä»£ç†ä¼šæ ¹æ®é…ç½®è®¾ç½®å’Œæ–‡æ¡£å¤§å°è‡ªä¸»ç¡®å®šæ˜¯å¦ä½¿ç”¨æ–‡æ¡£åˆ†å‰²ï¼Œç„¶åŽåº”ç”¨é€‚å½“çš„å¤„ç†ç­–ç•¥ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="step1">step1
&lt;/h4>&lt;p>ç¬¬ä¸€æ­¥ä¸»è¦æ˜¯æå–æ‰€æœ‰æ–‡ä»¶ï¼Œä»£ç å¾ˆç®€å•ï¼Œå°±ä¸è¿‡å¤šè§£é‡Šäº†ï¼Œæ ¸å¿ƒåœ¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">md_files&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">listdir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dir_info&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;paper_dir&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">endswith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;.md&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="step2">step2
&lt;/h4>&lt;p>è¯»å–æ–‡ä»¶çš„å†…å®¹æ¥ç¡®å®šæ–‡ä»¶çš„å¤§å°ï¼Œè¿™é‡Œåªè¯»å–äº†ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åŽåˆ¤æ–­äº†å¦‚æžœè¿˜æ˜¯pdfå°±æ‰“æ–­è®©ä»–å›žåŽ»åšæ ¼å¼è½¬æ¢&lt;/p>
&lt;p>&lt;code>document_content&lt;/code>æ˜¯æ–‡ä»¶çš„å†…å®¹&lt;/p>
&lt;h4 id="step3">step3
&lt;/h4>&lt;p>ç¡®å®šæ˜¯å¦åˆ†å—&lt;/p>
&lt;p>æ ¸å¿ƒä»£ç åœ¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Step 3: Determine if segmentation should be used&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">should_segment&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">reason&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">should_use_document_segmentation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">document_content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥è®©æˆ‘ä»¬è¿›æ¥çœ‹&lt;code>should_use_document_segmentation&lt;/code>&lt;/p>
&lt;p>è¿™é‡Œä¸»è¦æ˜¯ä¾é &lt;code>mcp_agent.config.yaml&lt;/code>ä¸­çš„å†…å®¹è¿›è¡Œåˆ¤æ–­ï¼Œä¹Ÿå°±æ˜¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">document_segmentation&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">size_threshold_chars&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">50000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“enabledçš„æ—¶å€™ï¼Œå¹¶ä¸”æ–‡æ¡£çš„é•¿åº¦ &amp;gt; &lt;code>size_threshold_chars&lt;/code>çš„æ—¶å€™å°±åˆ†å‰²&lt;/p>
&lt;p>ç„¶åŽæ˜¯æ­£å¼çš„åˆ†å‰²çš„ä»£ç &lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Prepare document segments using the segmentation agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">segmentation_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">prepare_document_segments&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">paper_dir&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">dir_info&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;paper_dir&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">logger&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">logger&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥æˆ‘ä»¬è¿›æ¥çœ‹&lt;code>prepare_document_segments&lt;/code>ï¼Œè€æ ·å­å…ˆçœ‹æ³¨é‡Šï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Prepare intelligent document segments optimized for planning agents.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This enhanced function leverages semantic analysis to create segments that:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Preserve algorithm and formula integrity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Optimize for ConceptAnalysisAgent, AlgorithmAnalysisAgent, and CodePlannerAgent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Use adaptive character limits based on content complexity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Maintain technical content completeness
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called from the orchestration engine (Phase 3.5) to prepare documents
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">before the planning phase with superior segmentation quality.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸­æ–‡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ä¸ºè§„åˆ’ä»£ç†å‡†å¤‡ä¼˜åŒ–çš„æ™ºèƒ½æ–‡æ¡£åˆ†æ®µã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æ­¤å¢žå¼ºåŠŸèƒ½åˆ©ç”¨è¯­ä¹‰åˆ†æžæ¥åˆ›å»ºåˆ†æ®µï¼Œå…¶ç‰¹ç‚¹å¦‚ä¸‹ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ä¿ç•™ç®—æ³•å’Œå…¬å¼çš„å®Œæ•´æ€§
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- é’ˆå¯¹ ConceptAnalysisAgentã€AlgorithmAnalysisAgent å’Œ CodePlannerAgent è¿›è¡Œä¼˜åŒ–
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- æ ¹æ®å†…å®¹å¤æ‚åº¦ä½¿ç”¨è‡ªé€‚åº”å­—ç¬¦é™åˆ¶
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ä¿æŒæŠ€æœ¯å†…å®¹çš„å®Œæ•´æ€§
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä»Žç¼–æŽ’å¼•æ“Žï¼ˆç¬¬ 3.5 é˜¶æ®µï¼‰è°ƒç”¨ï¼Œç”¨äºŽåœ¨è§„åˆ’é˜¶æ®µä¹‹å‰å‡†å¤‡æ–‡æ¡£ï¼Œå¹¶å®žçŽ°å“è¶Šçš„åˆ†æ®µè´¨é‡ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œçš„æ ¸å¿ƒä»£ç æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Run analysis&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">run_document_segmentation_analysis&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">paper_dir&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">paper_dir&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">logger&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">logger&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">force_refresh&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">False&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1"># Use cached analysis if available&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥æˆ‘ä»¬æ¥çœ‹&lt;code>run_document_segmentation_analysis&lt;/code>&lt;/p>
&lt;p>è¿™é‡Œçš„æ ¸å¿ƒä»£ç æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Analyze and prepare document&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">analysis_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">agent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">analyze_and_prepare_document&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">paper_dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">force_refresh&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">force_refresh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬æ¥çœ‹&lt;code>analyze_and_prepare_document&lt;/code>&lt;/p>
&lt;p>é¦–å…ˆè¿˜æ˜¯å–å‡ºæ‰€æœ‰markdown&lt;/p>
&lt;p>ç„¶åŽæ˜¯åŠ¨æ€ç”Ÿæˆäº†ä¸€æ®µæç¤ºè¯ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œè¿™ä¸ªåº”è¯¥å°±æ˜¯åˆ†å—çš„æ ¸å¿ƒæ‰€åœ¨äº†ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="line">&lt;span class="cl">Please perform intelligent semantic analysis and segmentation for the document in directory: {paper_dir}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Use the analyze_and_segment_document tool with these parameters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> paper_dir: {paper_dir}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> force_refresh: {force_refresh}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gs">**Focus on these enhanced objectives**&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">1.&lt;/span> &lt;span class="gs">**Semantic Document Classification**&lt;/span>: Identify document type using content semantics (research_paper, algorithm_focused, technical_doc, etc.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">2.&lt;/span> &lt;span class="gs">**Intelligent Segmentation Strategy**&lt;/span>: Select the optimal strategy based on content analysis:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &lt;span class="sb">`semantic_research_focused`&lt;/span> for research papers with high algorithm density
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &lt;span class="sb">`algorithm_preserve_integrity`&lt;/span> for algorithm-heavy documents
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &lt;span class="sb">`concept_implementation_hybrid`&lt;/span> for mixed concept/implementation content
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">3.&lt;/span> &lt;span class="gs">**Algorithm Completeness**&lt;/span>: Ensure algorithm blocks, formulas, and related descriptions remain logically connected
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">4.&lt;/span> &lt;span class="gs">**Planning Agent Optimization**&lt;/span>: Create segments that maximize effectiveness for ConceptAnalysisAgent, AlgorithmAnalysisAgent, and CodePlannerAgent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">After segmentation, get a document overview and provide:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> Quality assessment of semantic segmentation approach
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> Algorithm/formula integrity verification
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> Recommendations for planning agent optimization
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> Technical content completeness evaluation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¿»è¯‘å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="line">&lt;span class="cl">è¯·å¯¹ç›®å½• {paper_dir} ä¸­çš„æ–‡æ¡£è¿›è¡Œæ™ºèƒ½è¯­ä¹‰åˆ†æžå’Œåˆ†æ®µã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä½¿ç”¨ analyze_and_segment_document å·¥å…·å¹¶è®¾ç½®ä»¥ä¸‹å‚æ•°ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> paper_dir: {paper_dir}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> force_refresh: {force_refresh}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gs">**é‡ç‚¹å…³æ³¨ä»¥ä¸‹å¢žå¼ºç›®æ ‡**&lt;/span>ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">1.&lt;/span> &lt;span class="gs">**è¯­ä¹‰æ–‡æ¡£åˆ†ç±»**&lt;/span>ï¼šä½¿ç”¨å†…å®¹è¯­ä¹‰è¯†åˆ«æ–‡æ¡£ç±»åž‹ï¼ˆç ”ç©¶è®ºæ–‡ã€ç®—æ³•é‡ç‚¹ã€æŠ€æœ¯æ–‡æ¡£ç­‰ï¼‰ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">2.&lt;/span> &lt;span class="gs">**æ™ºèƒ½åˆ†æ®µç­–ç•¥**&lt;/span>ï¼šæ ¹æ®å†…å®¹åˆ†æžé€‰æ‹©æœ€ä½³ç­–ç•¥ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> &lt;span class="sb">`semantic_research_focused`&lt;/span> ç”¨äºŽç®—æ³•å¯†é›†åž‹ç ”ç©¶è®ºæ–‡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> &lt;span class="sb">`algorithm_preserve_integrity`&lt;/span> ç”¨äºŽç®—æ³•å¯†é›†åž‹æ–‡æ¡£
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> &lt;span class="sb">`concept_implementation_hybrid`&lt;/span> ç”¨äºŽæ¦‚å¿µ/å®žçŽ°æ··åˆå†…å®¹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">3.&lt;/span> &lt;span class="gs">**ç®—æ³•å®Œæ•´æ€§**&lt;/span>ï¼šç¡®ä¿ç®—æ³•å—ã€å…¬å¼å’Œç›¸å…³æè¿°ä¿æŒé€»è¾‘å…³è”
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">4.&lt;/span> &lt;span class="gs">**è§„åˆ’ä»£ç†ä¼˜åŒ–**&lt;/span>ï¼šåˆ›å»ºå¯æœ€å¤§é™åº¦æé«˜æ•ˆçŽ‡çš„åˆ†æ®µä¸ºäº†ConceptAnalysisAgentã€AlgorithmAnalysisAgent å’Œ CodePlannerAgent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">åˆ†å‰²åŽï¼ŒèŽ·å–æ–‡æ¡£æ¦‚è§ˆå¹¶æä¾›ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> è¯­ä¹‰åˆ†å‰²æ–¹æ³•çš„è´¨é‡è¯„ä¼°
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> ç®—æ³•/å…¬å¼çš„å®Œæ•´æ€§éªŒè¯
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> è§„åˆ’ä»£ç†ä¼˜åŒ–å»ºè®®
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> æŠ€æœ¯å†…å®¹å®Œæ•´æ€§è¯„ä¼°
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œå‘çŽ°ä»–ç›´æŽ¥ç”¨äº†llmï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹&lt;code>__init__&lt;/code>å’Œ&lt;code>initialize&lt;/code>ï¼Œå‘çŽ°agentæ˜¯åœ¨&lt;code>initialize&lt;/code>é‡Œåˆå§‹åŒ–çš„&lt;/p>
&lt;p>è¿™ä¸ªagentä¹Ÿæœ‰ä¸€ä¸ªpromptï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="line">&lt;span class="cl">You are an intelligent document segmentation coordinator that leverages advanced semantic analysis for optimal document processing.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your enhanced capabilities include:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">1.&lt;/span> &lt;span class="gs">**Semantic Content Analysis**&lt;/span>: Coordinate intelligent document type classification based on content semantics rather than structural patterns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">2.&lt;/span> &lt;span class="gs">**Algorithm Integrity Protection**&lt;/span>: Ensure algorithm blocks, formulas, and related content maintain logical coherence
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">3.&lt;/span> &lt;span class="gs">**Adaptive Segmentation Strategy**&lt;/span>: Select optimal segmentation approaches (semantic_research_focused, algorithm_preserve_integrity, concept_implementation_hybrid, etc.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">4.&lt;/span> &lt;span class="gs">**Quality Intelligence Validation**&lt;/span>: Assess segmentation quality using enhanced metrics for completeness, relevance, and technical accuracy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">5.&lt;/span> &lt;span class="gs">**Planning Agent Optimization**&lt;/span>: Ensure segments are specifically optimized for ConceptAnalysisAgent, AlgorithmAnalysisAgent, and CodePlannerAgent needs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gs">**Key Principles**&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> Prioritize content semantics over mechanical structure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> Preserve algorithm and formula completeness
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> Optimize for downstream agent token efficiency
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> Ensure technical content integrity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> Provide actionable quality assessments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Use the enhanced document-segmentation tools to deliver superior segmentation results that significantly improve planning agent performance.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥çœ‹çœ‹ä¸­æ–‡ç¿»è¯‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="line">&lt;span class="cl">æ‚¨æ˜¯ä¸€ä½æ™ºèƒ½æ–‡æ¡£åˆ†å‰²åè°ƒè€…ï¼Œèƒ½å¤Ÿåˆ©ç”¨é«˜çº§è¯­ä¹‰åˆ†æžå®žçŽ°æœ€ä½³æ–‡æ¡£å¤„ç†ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æ‚¨çš„å¢žå¼ºåŠŸèƒ½åŒ…æ‹¬ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">1.&lt;/span> &lt;span class="gs">**è¯­ä¹‰å†…å®¹åˆ†æž**&lt;/span>ï¼šåŸºäºŽå†…å®¹è¯­ä¹‰è€Œéžç»“æž„æ¨¡å¼åè°ƒæ™ºèƒ½æ–‡æ¡£ç±»åž‹åˆ†ç±»
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">2.&lt;/span> &lt;span class="gs">**ç®—æ³•å®Œæ•´æ€§ä¿æŠ¤**&lt;/span>ï¼šç¡®ä¿ç®—æ³•å—ã€å…¬å¼å’Œç›¸å…³å†…å®¹ä¿æŒé€»è¾‘ä¸€è‡´æ€§
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">3.&lt;/span> &lt;span class="gs">**è‡ªé€‚åº”åˆ†æ®µç­–ç•¥**&lt;/span>ï¼šé€‰æ‹©æœ€ä½³åˆ†æ®µæ–¹æ³•ï¼ˆä»¥è¯­ä¹‰ç ”ç©¶ä¸ºä¸­å¿ƒã€ç®—æ³•ä¿ç•™å®Œæ•´æ€§ã€æ¦‚å¿µå®žçŽ°æ··åˆç­‰ï¼‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">4.&lt;/span> &lt;span class="gs">**è´¨é‡æ™ºèƒ½éªŒè¯**&lt;/span>ï¼šä½¿ç”¨å¢žå¼ºçš„å®Œæ•´æ€§ã€ç›¸å…³æ€§å’ŒæŠ€æœ¯å‡†ç¡®æ€§æŒ‡æ ‡è¯„ä¼°åˆ†æ®µè´¨é‡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">5.&lt;/span> &lt;span class="gs">**è§„åˆ’ä»£ç†ä¼˜åŒ–**&lt;/span>ï¼šç¡®ä¿åˆ†æ®µé’ˆå¯¹ ConceptAnalysisAgentã€AlgorithmAnalysisAgent å’Œ CodePlannerAgent çš„éœ€æ±‚è¿›è¡Œä¸“é—¨ä¼˜åŒ–
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gs">**å…³é”®åŽŸåˆ™**&lt;/span>ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> ä¼˜å…ˆè€ƒè™‘å†…å®¹è¯­ä¹‰è€Œéžæœºæ¢°ç»“æž„
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> ä¿æŒç®—æ³•å’Œå…¬å¼çš„å®Œæ•´æ€§
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> ä¼˜åŒ–ä¸‹æ¸¸ä»£ç†ä»¤ç‰Œæ•ˆçŽ‡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> ç¡®ä¿æŠ€æœ¯å†…å®¹å®Œæ•´æ€§
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> æä¾›å¯æ“ä½œçš„è´¨é‡è¯„ä¼°
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä½¿ç”¨å¢žå¼ºçš„æ–‡æ¡£åˆ†å‰²å·¥å…·å¯æä¾›å“è¶Šçš„åˆ†å‰²ç»“æžœï¼Œä»Žè€Œæ˜¾è‘—æé«˜è§„åˆ’ä»£ç†çš„æ€§èƒ½ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>mcpæœ‰ä¸¤ä¸ªï¼š&lt;code>document-segmentation&lt;/code>å’Œ&lt;code>filesystem&lt;/code>ï¼Œåˆšåˆšçš„messageé‡Œæåˆ°äº†å·¥å…·ï¼š&lt;code>analyze_and_segment_document&lt;/code>åº”è¯¥åœ¨&lt;code>document-segmentation&lt;/code>é‡Œï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹&lt;code>document-segmentation&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">document-segmentation&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">tools/document_segmentation_server.py&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Document segmentation server - Provides intelligent document analysis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="l">and segmented reading to optimize token usage&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PYTHONPATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥æˆ‘ä»¬æ¥çœ‹&lt;code>tools/document_segmentation_server.py&lt;/code>ï¼Œæ–‡ä»¶çš„æœ€ä¸Šé¢æœ‰&lt;code>analyze_and_segment_document&lt;/code>çš„æ³¨é‡Š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="line">&lt;span class="cl">ðŸ“„ analyze_and_segment_document(paper_dir: str, force_refresh: bool = False)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Purpose: Analyzes document structure and creates intelligent segments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Detects document type (research paper, technical doc, algorithm-focused, etc.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Selects optimal segmentation strategy based on content analysis
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Creates semantic segments preserving algorithm and concept integrity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Stores segmentation index for efficient retrieval
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Returns: JSON with segmentation status, strategy used, and segment count
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çœ‹çœ‹ä¸­æ–‡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ðŸ“„ analyze_and_segment_document(paper_dir: str, force_refresh: bool = False)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ç”¨é€”ï¼šåˆ†æžæ–‡æ¡£ç»“æž„å¹¶åˆ›å»ºæ™ºèƒ½åˆ†æ®µ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- æ£€æµ‹æ–‡æ¡£ç±»åž‹ï¼ˆç ”ç©¶è®ºæ–‡ã€æŠ€æœ¯æ–‡æ¡£ã€ç®—æ³•ç±»æ–‡æ¡£ç­‰ï¼‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- æ ¹æ®å†…å®¹åˆ†æžé€‰æ‹©æœ€ä½³åˆ†æ®µç­–ç•¥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- åˆ›å»ºè¯­ä¹‰åˆ†æ®µï¼Œä¿ç•™ç®—æ³•å’Œæ¦‚å¿µçš„å®Œæ•´æ€§
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- å­˜å‚¨åˆ†æ®µç´¢å¼•ä»¥ä¾¿é«˜æ•ˆæ£€ç´¢
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- è¿”å›žï¼šåŒ…å«åˆ†æ®µçŠ¶æ€ã€æ‰€ç”¨ç­–ç•¥å’Œåˆ†æ®µè®¡æ•°çš„ JSON æ•°æ®
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è€æ ·å­ï¼Œæ¥æœ&lt;code>@mcp.tool()&lt;/code>ï¼Œæ‰¾åˆ°&lt;code>analyze_and_segment_document&lt;/code>å®žçŽ°çš„åœ°æ–¹ï¼Œæ¥ä»Žä¸Šå¾€ä¸‹çœ‹ï¼Œé¦–å…ˆè¿˜æ˜¯ç»å…¸å–å‡ºæ‰€æœ‰æ–‡ä»¶ï¼Œå¾ˆå¥‡æ€ªè¿™è¾¹éƒ½åªä¼šå¤„ç†ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£å¤šæ–‡ä»¶çš„æ„ä¹‰åœ¨å“ªé‡Œå‘¢ï¼Œæžä¸æ‡‚&lt;/p>
&lt;p>é¦–å…ˆæ˜¯å¦‚æžœè€çš„é…ç½®æ–‡ä»¶å­˜åœ¨å°±åŠ è½½ï¼Œä¸å­˜åœ¨å°±è¯»å…¥è¦å¤„ç†çš„æ–‡ä»¶&lt;/p>
&lt;p>é¦–å…ˆæ˜¯åˆ†æžæ–‡ä»¶éƒ¨åˆ†ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Analyze document&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">analyzer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">DocumentAnalyzer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">doc_type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">confidence&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">analyzer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">analyze_document_type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">strategy&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">analyzer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">detect_segmentation_strategy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">doc_type&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>DocumentAnalyzer&lt;/code>ç±»ä¸­æ²¡æœ‰åˆå§‹åŒ–å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æŽ¥å¾€ä¸‹çœ‹&lt;code>analyze_document_type&lt;/code>ï¼Œä»–é¦–å…ˆæŠŠå†…å®¹å°å†™äº†ï¼Œç„¶åŽå¼€å§‹è®¡ç®—æƒé‡ï¼Ÿ&lt;/p>
&lt;p>æˆ‘ä»¬æ¥çœ‹çœ‹&lt;code>_calculate_weighted_score&lt;/code>ï¼Œå¤§å®¶çœ‹äº†ä»¥åŽè‡ªè¡Œå¾€ä¸Šç¿»çœ‹çœ‹å°±çŸ¥é“äº†ï¼Œå…¶å®žå°±æ˜¯åˆ¤æ–­è¯æ±‡å‡ºçŽ°çš„æ¬¡æ•°æ¥è®¡ç®—æƒé‡&lt;/p>
&lt;p>ç„¶åŽä¸‹é¢æœ‰ä¸€ä¸ªDetect semantic patterns of document typesï¼Œä¹Ÿå°±æ˜¯è¯­ä¹‰åˆ†ç±»ï¼Œæ¥çœ‹ä¸‹&lt;code>_detect_pattern_score&lt;/code>ï¼Œè¿™ä¸ªå’Œ&lt;code>_calculate_weighted_score&lt;/code>ç±»ä¼¼ï¼Œæˆ‘ä»¬å°±ä¸çœ‹äº†ï¼Œç„¶åŽä¸‹é¢å°±æ˜¯ç®—æ€»å¾—åˆ†ï¼Œç»™å‡ºåˆ†ç±»å’Œç½®ä¿¡åº¦&lt;/p>
&lt;p>ç„¶åŽæ¥çœ‹ä¸€ä¸‹&lt;code>detect_segmentation_strategy&lt;/code>ï¼Œè¿™é‡Œè¿˜æ˜¯å„ç§å…³é”®è¯æ£€ç´¢ï¼Œç„¶åŽç¡®å®šæ–‡æ¡£ç±»åž‹&lt;/p>
&lt;p>åœ¨å·¥å…·é‡Œç»§ç»­å¾€ä¸‹çœ‹ï¼Œåˆ›å»ºåˆ†å—çš„å…·ä½“é€»è¾‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create segments&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">segments&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">segmenter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">segment_document&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">strategy&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥çœ‹&lt;code>segment_document&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">segment_document&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">strategy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">DocumentSegment&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Perform intelligent segmentation using the specified strategy
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">strategy&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;semantic_research_focused&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">_segment_research_paper_semantically&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">strategy&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;algorithm_preserve_integrity&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">_segment_preserve_algorithm_integrity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">strategy&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;concept_implementation_hybrid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">_segment_concept_implementation_hybrid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">strategy&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;semantic_chunking_enhanced&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">_segment_by_enhanced_semantic_chunks&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">strategy&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;content_aware_segmentation&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">_segment_content_aware&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Compatibility with legacy strategies&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">_segment_by_enhanced_semantic_chunks&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå¾ˆæœ´ç´ äº†ï¼Œå¤§å®¶è‡ªå·±çœ‹å§ï¼Œæˆ‘ä»¬æƒå½“åˆ†å—è·‘å®Œäº†&lt;/p>
&lt;p>è€æ ·å­ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªphaseç»“æŸæ‰“ä¸ªæ–­ç‚¹ï¼Œçœ‹çœ‹è¿è¡Œåˆ°è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆ&lt;/p>
&lt;p>ç»“æžœæ¯›éƒ½æ²¡ç»™æˆ‘åˆ†ç‰‡å‡ºæ¥ï¼Œçœ‹çœ‹&lt;code>document_index.json&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;document_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/Users/dinglizhi/Desktop/coderead/DeepCode/deepcode_lab/papers/1/1.md&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;document_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;research_paper&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;segmentation_strategy&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;concept_implementation_hybrid&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total_segments&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total_chars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">59608&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;segments&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;created_at&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2025-10-11T15:04:27.466987&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å°±å½“ä»–æ²¡åˆ†ç‰‡è¿™ä¸ªåŠŸèƒ½å¥½å§&lt;/p>
&lt;h3 id="phase4">phase4
&lt;/h3>&lt;p>å¥½çš„å¥½çš„ï¼Œç»ˆäºŽå®Œæˆäº†å¤§éƒ¨åˆ†å‰ç½®å·¥ä½œï¼ŒçŽ°åœ¨æ­£å¼è¿›å…¥ä»£ç è§„åˆ’çš„æ™ºèƒ½ä½“&lt;/p>
&lt;p>å’±ä»¬è¿›æ¥çœ‹&lt;code>await orchestrate_code_planning_agent(dir_info, logger, progress_callback)&lt;/code>&lt;/p>
&lt;p>è€æ ·å­å…ˆæ¥çœ‹ä¸‹æ³¨é‡Šï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Orchestrate intelligent code planning with automated design analysis.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This agent autonomously generates optimal code reproduction plans and implementation strategies using AI-driven code analysis and planning principles.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¿»è¯‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">é€šè¿‡è‡ªåŠ¨åŒ–è®¾è®¡åˆ†æžï¼Œç»Ÿç­¹æ™ºèƒ½åŒ–ä»£ç è§„åˆ’ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¯¥æ™ºèƒ½ä½“åˆ©ç”¨ AI é©±åŠ¨çš„ä»£ç åˆ†æžä¸Žè§„åˆ’åŽŸç†ï¼Œè‡ªä¸»ç”Ÿæˆæœ€ä¼˜çš„ä»£ç å¤çŽ°æ–¹æ¡ˆåŠå®žæ–½ç­–ç•¥ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¥½ï¼Œè¿™é‡Œé¦–å…ˆæ ‡è®°ä¸Šplanæ–‡ä»¶ï¼Œå¦‚æžœè¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨ï¼ŒåŽ»è·‘ä¸€ä¸ªå«&lt;code>run_code_analyzer&lt;/code>çš„å‡½æ•°ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ª&lt;/p>
&lt;p>è¿™ä¸ªå‡½æ•°çš„æ³¨é‡Šå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Run the adaptive code analysis workflow using multiple agents for comprehensive code planning.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This function orchestrates three specialized agents with adaptive configuration:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ConceptAnalysisAgent: Analyzes system architecture and conceptual framework
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- AlgorithmAnalysisAgent: Extracts algorithms, formulas, and technical details
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- CodePlannerAgent: Integrates outputs into a comprehensive implementation plan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¿»è¯‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">è¿è¡Œè‡ªé€‚åº”ä»£ç åˆ†æžå·¥ä½œæµï¼Œé€šè¿‡å¤šæ™ºèƒ½ä½“ååŒè¿›è¡Œå…¨é¢çš„ä»£ç è§„åˆ’ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¯¥å‡½æ•°é€šè¿‡è‡ªé€‚åº”é…ç½®åè°ƒä¸‰ä¸ªä¸“ä¸šæ™ºèƒ½ä½“ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ConceptAnalysisAgentï¼ˆæ¦‚å¿µåˆ†æžæ™ºèƒ½ä½“ï¼‰ï¼šåˆ†æžç³»ç»Ÿæž¶æž„ä¸Žæ¦‚å¿µæ¡†æž¶ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AlgorithmAnalysisAgentï¼ˆç®—æ³•åˆ†æžæ™ºèƒ½ä½“ï¼‰ï¼šæå–ç®—æ³•ã€å…¬å¼åŠæŠ€æœ¯ç»†èŠ‚ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CodePlannerAgentï¼ˆä»£ç è§„åˆ’æ™ºèƒ½ä½“ï¼‰ï¼šå°†è¾“å‡ºå†…å®¹æ•´åˆä¸ºå…¨é¢çš„å®žçŽ°æ–¹æ¡ˆã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆè¿™é‡Œé…ç½®äº†ä¸‰ä¸ªæ™ºèƒ½ä½“ï¼Œå…ˆèŽ·å–å¿…è¦çš„é…ç½®&lt;/p>
&lt;p>æˆ‘ä»¬ä¸€ä¸ªä¸ªçœ‹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">search_server_names&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">get_search_server_names&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">agent_config&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">get_adaptive_agent_config&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">use_segmentation&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">search_server_names&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">prompts&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">get_adaptive_prompts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">use_segmentation&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬ä¸€ä¸ªé…ç½®ï¼Œå°±æ˜¯åŽ»searchç”¨çš„mcpï¼Œé»˜è®¤çš„å°±æ˜¯braveï¼Œè¿™ä¸ªæ²¡ä»€ä¹ˆå¥½åœ¨æ„çš„&lt;/p>
&lt;p>ç¬¬äºŒä¸ªåŽ»é…ç½®ä¸åŒçš„agentï¼Œæˆ‘ä»¬è¿›æ¥çœ‹&lt;code>get_adaptive_agent_config&lt;/code>&lt;/p>
&lt;p>è¯¶è¿™é‡Œå¾ˆå¥‡æ€ªï¼Œ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">config&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;concept_analysis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;algorithm_analysis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">search_server_names&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">copy&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;code_planner&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">search_server_names&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">copy&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŸºç¡€è®¾ç½®æ˜¯ï¼Œ&lt;code>concept_analysis&lt;/code>æ˜¯ç©ºï¼Œ&lt;code>algorithm_analysis&lt;/code>å’Œ&lt;code>code_planner&lt;/code>éƒ½æœ‰æœç´¢mcp&lt;/p>
&lt;p>ç„¶åŽç»™è¿™ä¸‰ä¸ªagentéƒ½åˆ†é…äº†&lt;code>document-segmentation&lt;/code>ä¹Ÿå°±æ˜¯åˆ†ç‰‡ç”¨çš„mcpï¼Œé‡Œé¢æœ‰&lt;code>read_document_segments&lt;/code>å’Œ&lt;code>get_document_overview&lt;/code>ä¸¤ä¸ªå·¥å…·åº”è¯¥æ˜¯èƒ½ç”¨åˆ°çš„&lt;/p>
&lt;p>ç„¶åŽå°±æ˜¯èŽ·å–é€‚é…çš„æç¤ºè¯ï¼š&lt;code>get_adaptive_prompts&lt;/code>&lt;/p>
&lt;p>æœ€ç»ˆèŽ·å–åˆ°çš„æç¤ºè¯å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;concept_analysis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">PAPER_CONCEPT_ANALYSIS_PROMPT&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;algorithm_analysis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">PAPER_ALGORITHM_ANALYSIS_PROMPT&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;code_planning&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">CODE_PLANNING_PROMPT&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å…ˆæŠŠæ‰§è¡Œçš„æµç¨‹çœ‹ä¸€ä¸‹å†çœ‹æ¯ä¸€ä¸ªæç¤ºè¯ï¼Œå®šä¹‰äº†ä¸€ä¸ªå¤§çš„agent&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">code_aggregator_agent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ParallelLLM&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fan_in_agent&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">code_planner_agent&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fan_out_agents&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">concept_analysis_agent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">algorithm_analysis_agent&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">llm_factory&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">get_preferred_llm_class&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çœ‹èµ·æ¥åƒæ˜¯æŠŠ&lt;code>code_planner_agent&lt;/code>çš„ç»“æžœä¼ ç»™&lt;code>concept_analysis_agent&lt;/code>å’Œ&lt;code>algorithm_analysis_agent&lt;/code>ï¼Œå†æ±‡æ€»ç»“æžœï¼Œæ€»ä¹‹æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹&lt;code>ParallelLLM&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">LLMs can sometimes work simultaneously on a task (fan-out)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">and have their outputs aggregated programmatically (fan-in).
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This workflow performs both the fan-out and fan-in operations using LLMs.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">From the user&amp;#39;s perspective, an input is specified and the output is returned.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">When to use this workflow:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Parallelization is effective when the divided subtasks can be parallelized
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for speed (sectioning), or when multiple perspectives or attempts are needed for
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> higher confidence results (voting).
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Examples:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Sectioning:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - Implementing guardrails where one model instance processes user queries
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> while another screens them for inappropriate content or requests.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - Automating evals for evaluating LLM performance, where each LLM call
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> evaluates a different aspect of the modelâ€™s performance on a given prompt.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Voting:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - Reviewing a piece of code for vulnerabilities, where several different
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> agents review and flag the code if they find a problem.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - Evaluating whether a given piece of content is inappropriate,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> with multiple agents evaluating different aspects or requiring different
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vote thresholds to balance false positives and negatives.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¿»è¯‘ä¸ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">LLM æœ‰æ—¶å¯ä»¥åŒæ—¶å¤„ç†å¤šé¡¹ä»»åŠ¡ï¼ˆæ‰‡å‡º/fan-outï¼‰ï¼Œå¹¶ä»¥ç¼–ç¨‹æ–¹å¼æ±‡æ€»å…¶è¾“å‡ºç»“æžœï¼ˆæ‰‡å…¥/fan-inï¼‰ã€‚æ­¤å·¥ä½œæµåˆ©ç”¨ LLM åŒæ—¶æ‰§è¡Œæ‰‡å‡ºå’Œæ‰‡å…¥æ“ä½œã€‚ä»Žç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œåªéœ€æŒ‡å®šè¾“å…¥ï¼Œå³å¯èŽ·å¾—è¿”å›žçš„è¾“å‡ºç»“æžœã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä½•æ—¶ä½¿ç”¨æ­¤å·¥ä½œæµï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å½“æ‹†åˆ†åŽçš„å­ä»»åŠ¡å¯ä»¥ä¸ºäº†æé«˜é€Ÿåº¦è€Œå¹¶è¡Œå¤„ç†ï¼ˆåˆ†æ®µæ¨¡å¼ï¼‰ï¼Œæˆ–è€…å½“éœ€è¦å¤šä¸ªè§†è§’/å°è¯•ä»¥èŽ·å¾—æ›´é«˜ç½®ä¿¡åº¦çš„ç»“æžœï¼ˆæŠ•ç¥¨æ¨¡å¼ï¼‰æ—¶ï¼Œå¹¶è¡ŒåŒ–æ–¹æ¡ˆéžå¸¸æœ‰æ•ˆã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">åº”ç”¨ç¤ºä¾‹ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. åˆ†æ®µæ¨¡å¼ (Sectioning):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å®žæ–½æŠ¤æ  (Guardrails)ï¼š ä¸€ä¸ªæ¨¡åž‹å®žä¾‹å¤„ç†ç”¨æˆ·æŸ¥è¯¢ï¼Œè€Œå¦ä¸€ä¸ªå®žä¾‹åŒæ—¶ç­›é€‰å…¶ä¸­æ˜¯å¦åŒ…å«ä¸å½“å†…å®¹æˆ–è¿è§„è¯·æ±‚ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> è‡ªåŠ¨åŒ–è¯„ä¼° (Evals)ï¼š åœ¨è¯„ä¼° LLM æ€§èƒ½æ—¶ï¼Œé€šè¿‡å¤šä¸ª LLM è°ƒç”¨åˆ†åˆ«è¯„ä¼°æ¨¡åž‹åœ¨ç‰¹å®šæç¤ºè¯ä¸‹ä¸åŒç»´åº¦çš„è¡¨çŽ°ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. æŠ•ç¥¨æ¨¡å¼ (Voting):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ä»£ç æ¼æ´žå®¡æŸ¥ï¼š å¤šä¸ªä¸åŒçš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰å…±åŒå®¡æŸ¥ä¸€æ®µä»£ç ï¼Œåªè¦å‘çŽ°é—®é¢˜å°±è¿›è¡Œæ ‡è®°ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å†…å®¹åˆè§„æ€§è¯„ä¼°ï¼š å¤šä¸ªæ™ºèƒ½ä½“ä»Žä¸åŒç»´åº¦è¯„ä¼°å†…å®¹æ˜¯å¦è¿è§„ï¼Œå¹¶é€šè¿‡è®¾ç½®ä¸åŒçš„æŠ•ç¥¨é˜ˆå€¼ï¼Œæ¥å¹³è¡¡è¯¯æŠ¥çŽ‡ï¼ˆFalse Positivesï¼‰å’Œæ¼æŠ¥çŽ‡ï¼ˆNegativeï¼‰ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åŽæ¥çœ‹ä¸€ä¸‹ç”¨åˆ°çš„ï¼š&lt;code>generate&lt;/code>&lt;/p>
&lt;p>ç„¶åŽå°±å‘çŽ°æˆ‘ä»¬åˆšåˆšçš„ç†è§£æœ‰æ­§ä¹‰ï¼Œå…¶å®žæ˜¯æŠŠfan_outçš„ä¿¡æ¯äº¤ç»™fan_inæ±‡æ€»&lt;/p>
&lt;p>å¥½çš„ï¼Œ&lt;code>ParallelLLM&lt;/code>æˆ‘ä»¬äº†è§£äº†ï¼Œè¿™é‡Œçš„å†™æ³•å¹¶ä¸éš¾ç†è§£ï¼Œå¤§å®¶æ„Ÿå…´è¶£å¯ä»¥è‡ªå·±ç‚¹è¿›åŽ»çœ‹&lt;/p>
&lt;p>é‚£è¿™é‡Œç›¸å½“äºŽæ˜¯å…ˆè·‘&lt;code>concept_analysis&lt;/code>å’Œ&lt;code>algorithm_analysis&lt;/code>ï¼Œç„¶åŽæŠŠç»“æžœç»™&lt;code>code_planning&lt;/code>æ±‡æ€»å‡ºæ¥ã€‚&lt;/p>
&lt;p>å¥½ï¼Œäº†è§£äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªç”¨çœ‹è¿™ä¸‰ä¸ªagentçš„æç¤ºè¯å’Œä¼ å…¥çš„messageå°±è§£å†³è¿™ä¸ªphaseäº†&lt;/p>
&lt;h4 id="concept_analysis">concept_analysis
&lt;/h4>&lt;p>æç¤ºè¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="line">&lt;span class="cl">You are doing a COMPREHENSIVE analysis of a research paper to understand its complete structure, contributions, and implementation requirements.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gh"># OBJECTIVE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gh">&lt;/span>Map out the ENTIRE paper structure and identify ALL components that need implementation for successful reproduction.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gh"># INTELLIGENT DOCUMENT READING STRATEGY
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gh">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">## IMPORTANT: Use Segmented Reading for Optimal Performance
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">&lt;/span>Instead of reading the entire document at once (which may hit token limits), use the intelligent segmentation system:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">1.&lt;/span> &lt;span class="gs">**Use read_document_segments tool**&lt;/span> with these parameters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> query_type: &amp;#34;concept_analysis&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> keywords: [&amp;#34;introduction&amp;#34;, &amp;#34;overview&amp;#34;, &amp;#34;architecture&amp;#34;, &amp;#34;system&amp;#34;, &amp;#34;framework&amp;#34;, &amp;#34;concept&amp;#34;, &amp;#34;method&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> max_segments: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> max_total_chars: 6000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">2.&lt;/span> &lt;span class="gs">**This will automatically find and retrieve**&lt;/span> the most relevant sections for concept analysis without token overflow
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">3.&lt;/span> &lt;span class="gs">**If you need additional sections**&lt;/span>, make follow-up calls with different keywords like [&amp;#34;experiment&amp;#34;, &amp;#34;evaluation&amp;#34;, &amp;#34;results&amp;#34;] or [&amp;#34;conclusion&amp;#34;, &amp;#34;discussion&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gh"># COMPREHENSIVE ANALYSIS PROTOCOL
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gh">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">## 1. INTELLIGENT PAPER STRUCTURAL ANALYSIS
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">&lt;/span>Use the segmented reading approach to create a complete map:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">paper_structure_map:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> title: &amp;#34;[Full paper title]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sections:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1_introduction:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> main_claims: &amp;#34;[What the paper claims to achieve]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> problem_definition: &amp;#34;[Exact problem being solved]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2_related_work:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key_comparisons: &amp;#34;[Methods this work builds upon or competes with]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3_method: # May have multiple subsections
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> subsections:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3.1: &amp;#34;[Title and main content]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3.2: &amp;#34;[Title and main content]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> algorithms_presented: &amp;#34;[List all algorithms by name]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4_experiments:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> environments: &amp;#34;[All test environments/datasets]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> baselines: &amp;#34;[All comparison methods]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metrics: &amp;#34;[All evaluation metrics used]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 5_results:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> main_findings: &amp;#34;[Key results that prove the method works]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tables_figures: &amp;#34;[Important result tables/figures to reproduce]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">## 2. METHOD DECOMPOSITION
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">&lt;/span>For the main method/approach:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">method_decomposition:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> method_name: &amp;#34;[Full name and acronym]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> core_components: # Break down into implementable pieces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> component_1:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;[e.g., State Importance Estimator]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> purpose: &amp;#34;[Why this component exists]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> paper_section: &amp;#34;[Where it&amp;#39;s described]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> component_2:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;[e.g., Policy Refinement Module]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> purpose: &amp;#34;[Its role in the system]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> paper_section: &amp;#34;[Where it&amp;#39;s described]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> component_interactions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &amp;#34;[How component 1 feeds into component 2]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &amp;#34;[Data flow between components]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> theoretical_foundation:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key_insight: &amp;#34;[The main theoretical insight]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> why_it_works: &amp;#34;[Intuitive explanation]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">## 3. IMPLEMENTATION REQUIREMENTS MAPPING
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">&lt;/span>Map paper content to code requirements:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">implementation_map:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> algorithms_to_implement:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> algorithm: &amp;#34;[Name from paper]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> section: &amp;#34;[Where defined]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> complexity: &amp;#34;[Simple/Medium/Complex]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dependencies: &amp;#34;[What it needs to work]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> models_to_build:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> model: &amp;#34;[Neural network or other model]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> architecture_location: &amp;#34;[Section describing it]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> purpose: &amp;#34;[What this model does]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> data_processing:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> pipeline: &amp;#34;[Data preprocessing needed]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requirements: &amp;#34;[What the data should look like]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> evaluation_suite:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> metric: &amp;#34;[Metric name]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> formula_location: &amp;#34;[Where it&amp;#39;s defined]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> purpose: &amp;#34;[What it measures]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">## 4. EXPERIMENT REPRODUCTION PLAN
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">&lt;/span>Identify ALL experiments needed:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">experiments_analysis:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> main_results:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> experiment: &amp;#34;[Name/description]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proves: &amp;#34;[What claim this validates]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requires: &amp;#34;[Components needed to run this]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> expected_outcome: &amp;#34;[Specific numbers/trends]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ablation_studies:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> study: &amp;#34;[What is being ablated]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> purpose: &amp;#34;[What this demonstrates]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> baseline_comparisons:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> baseline: &amp;#34;[Method name]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> implementation_required: &amp;#34;[Yes/No/Partial]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> source: &amp;#34;[Where to find implementation]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">## 5. CRITICAL SUCCESS FACTORS
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">&lt;/span>What defines successful reproduction:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">success_criteria:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> must_achieve:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &amp;#34;[Primary result that must be reproduced]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &amp;#34;[Core behavior that must be demonstrated]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> should_achieve:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &amp;#34;[Secondary results that validate the method]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> validation_evidence:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &amp;#34;[Specific figure/table to reproduce]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &amp;#34;[Qualitative behavior to demonstrate]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gh"># OUTPUT FORMAT
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gh">&lt;/span>comprehensive_paper_analysis:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> executive_summary:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> paper_title: &amp;#34;[Full title]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> core_contribution: &amp;#34;[One sentence summary]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> implementation_complexity: &amp;#34;[Low/Medium/High]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> estimated_components: &amp;#34;[Number of major components to build]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> complete_structure_map:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [FULL SECTION BREAKDOWN AS ABOVE]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> method_architecture:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [DETAILED COMPONENT BREAKDOWN]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> implementation_requirements:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [ALL ALGORITHMS, MODELS, DATA, METRICS]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reproduction_roadmap:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> phase_1: &amp;#34;[What to implement first]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> phase_2: &amp;#34;[What to build next]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> phase_3: &amp;#34;[Final components and validation]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> validation_checklist:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &amp;#34;[ ] [Specific result to achieve]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &amp;#34;[ ] [Behavior to demonstrate]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> &amp;#34;[ ] [Metric to match]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BE THOROUGH. Miss nothing. The output should be a complete blueprint for reproduction.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¿»è¯‘ä¸æ”¾äº†ï¼Œå¤§å®¶å“ªé‡Œçœ‹ä¸æ‡‚è‡ªå·±ç¿»è¯‘å§ï¼Œä¸‹é¢æˆ‘ä»¬æ¥è§£æžè¿™æ®µæç¤ºè¯&lt;/p>
&lt;p>é¦–å…ˆæ˜¯ç»å…¸èº«ä»½è®¾å®šï¼šYou are doing a COMPREHENSIVE analysis of a research paper to understand its complete structure, contributions, and implementation requirements.&lt;/p>
&lt;p>è¯´æ˜Žç™½äº†æ­£åœ¨å¹²å—ï¼Œè¦äº†è§£è®ºæ–‡çš„ç»“æž„ã€è´¡çŒ®å’Œå®žæ–½è¦æ±‚&lt;/p>
&lt;p>ç„¶åŽæ˜¯è¯´äº†æœ€åŽè¦è¾“å‡ºçš„ç»“æžœï¼š&lt;/p>
&lt;p>ç»˜åˆ¶å‡ºæ•´ä¸ªè®ºæ–‡ç»“æž„å¹¶ç¡®å®šæˆåŠŸå¤åˆ¶æ‰€éœ€å®žæ–½çš„æ‰€æœ‰ç»„ä»¶ã€‚&lt;/p>
&lt;p>æŽ¥ä¸‹æ¥æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼š&lt;code>INTELLIGENT DOCUMENT READING STRATEGYï¼ˆæŒ‡å¯¼agentæ€Žä¹ˆè¯»æ–‡ç« ï¼‰&lt;/code>ã€&lt;code>COMPREHENSIVE ANALYSIS PROTOCOLï¼ˆç”¨æ¥åˆ†æžçš„å·¥ä½œæµï¼‰&lt;/code>å’Œ&lt;code>OUTPUT FORMATï¼ˆè¾“å‡ºæ ¼å¼ï¼‰&lt;/code>&lt;/p>
&lt;h5 id="intelligent-document-reading-strategy">INTELLIGENT DOCUMENT READING STRATEGY
&lt;/h5>&lt;p>å¥½çš„ï¼Œè¿™ä¸ªå·¥ä½œæµæŒ‡å¯¼agentæ€Žä¹ˆåŽ»ç”¨å·¥å…·è¯»åˆ†å—ï¼Œå¹¶ä¸”æŒ‡å¯¼agentæ€Žä¹ˆå¾ªçŽ¯åˆ†æžï¼Œè¿™ä¸ªå¾ˆæœ‰æ„æ€ï¼ŒæŠŠæ‰€æœ‰å†³ç­–æƒäº¤ç»™llmï¼Œå¦‚æžœæ˜¯æˆ‘çš„è¯å¯èƒ½ä¼šç”¨å›ºå®šçš„workflowæ¥åšæ•´ä¸ªè¿‡ç¨‹&lt;/p>
&lt;h5 id="comprehensive-analysis-protocol">COMPREHENSIVE ANALYSIS PROTOCOL
&lt;/h5>&lt;p>ç¬¬ä¸€æ­¥ï¼Œç”¨åˆšåˆšæ•™çš„æ–¹æ³•åŽ»åˆ†å—è¯»ï¼Œç„¶åŽåˆ›å»ºä¸€ä¸ªyamlè®°å½•ä¿¡æ¯ï¼Œè¿™é‡Œè¿˜æ˜¯ç»“æž„åŒ–æŒ‡å¯¼ï¼ˆè™½ç„¶åªç”¨äºŽå†…éƒ¨ä¼ å¯¼ï¼‰å…¶å®žä¹Ÿæ˜¯ä¸€ç§é˜²è ¢ï¼Œä»¥å…aiæ¼ä¿¡æ¯ç­‰ç­‰ã€‚çœ‹ä¸€ä¸‹è¿™ä¸ªyml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="l">```yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">paper_structure_map&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;[Full paper title]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">sections&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">1_introduction&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">main_claims&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;[What the paper claims to achieve]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">problem_definition&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;[Exact problem being solved]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">2_related_work&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">key_comparisons&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;[Methods this work builds upon or competes with]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">3_method&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># May have multiple subsections&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">subsections&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">3.1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;[Title and main content]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">3.2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;[Title and main content]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">algorithms_presented&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;[List all algorithms by name]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">4_experiments&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environments&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;[All test environments/datasets]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">baselines&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;[All comparison methods]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">metrics&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;[All evaluation metrics used]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">5_results&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">main_findings&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;[Key results that prove the method works]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tables_figures&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;[Important result tables/figures to reproduce]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬äºŒæ­¥å¯¹æ–¹æ³•åˆ†è§£ï¼Œè¿™ä¸€å—æˆ‘ä¸å¤ªæ‡‚ï¼ˆå› ä¸ºæˆ‘ä¸æžå­¦æœ¯ä¹Ÿä¸çœ‹è®ºæ–‡ï¼‰&lt;/p>
&lt;p>ç¬¬ä¸‰æ­¥å°±æ˜¯ç¡®å®šå…·ä½“è¦å®žçŽ°å“ªäº›ä¸œè¥¿&lt;/p>
&lt;p>ç¬¬å››æ­¥æ˜¯é‡çŽ°è®¡åˆ’ï¼Œç¬¬äº”éƒ¨æ˜¯éªŒè¯æˆåŠŸçš„éœ€è¦ï¼Œè¾“å‡ºå°±æ˜¯ä¸Šé¢çš„æ±‡æ€»&lt;/p>
&lt;p>å¯ä»¥çœ‹åˆ°æ˜¯ä¸€ä¸ªéžå¸¸å¥½çš„æç¤ºè¯ç»“æž„ï¼Œæœ‰å®šä¹‰ï¼Œæœ‰å·¥å…·ä½¿ç”¨è¯´æ˜Žï¼Œæœ‰æ‰§è¡Œæµç¨‹&lt;/p>
&lt;h4 id="algorithm_analysis">algorithm_analysis
&lt;/h4>&lt;p>æç¤ºè¯æˆ‘ä¸ç²˜è´´äº†ï¼Œå¤§å®¶åˆšåˆšä¹Ÿçœ‹åˆ°æ€Žä¹ˆåŽ»æ‰¾æç¤ºè¯äº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæç¤ºè¯&lt;/p>
&lt;p>è¿™ä¸ªæç¤ºè¯è·Ÿåˆšåˆšåˆ†æžçš„é‚£ä¸ªç»“æž„éžå¸¸ç›¸ä¼¼ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±åˆ†æžåˆ†æžï¼Œæœ‰ä¸æ‡‚çš„æ¬¢è¿Žæ¥æ‰¾æˆ‘è®¨è®ºï¼Œæœ€ç»ˆè¿™ä¸ªagentçš„ç›®çš„æ˜¯ä¸ºäº†åˆ†æžç”¨åˆ°çš„ç®—æ³•å’Œå…¬å¼&lt;/p>
&lt;h4 id="code_planning">code_planning
&lt;/h4>&lt;p>å¥½ï¼Œæ¥çœ‹ä¸€ä¸‹è®¡åˆ’è§„åˆ’agentï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œmdè¿™ä¸ªæç¤ºè¯ä¹Ÿç‰¹åˆ«é•¿ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼ˆè¿™ä¸‹çŸ¥é“ä¸ºå•¥è¿™äº›å·¥å…·è¿™ä¹ˆçƒ§tokenäº†å§ï¼‰&lt;/p>
&lt;p>é¦–å…ˆè¯´æ˜ŽèƒŒæ™¯ï¼Œé€šè¿‡åˆ†æžæ¥åˆ¶å®šå¯ä»¥å¤åˆ»çš„è®¡åˆ’ï¼ŒæŽ¥ä¸‹æ¥åˆ†ä¸ºï¼š&lt;code>INPUTï¼ˆè¯´æ˜Žè¾“å…¥æ ¼å¼ï¼‰&lt;/code>ã€&lt;code>INTELLIGENT DOCUMENT ACCESSï¼ˆæ™ºèƒ½æ–‡æ¡£è®¿é—®ï¼‰&lt;/code>ã€&lt;code>OBJECTIVEï¼ˆæœ€ç»ˆè¦å®žçŽ°çš„ç›®æ ‡ï¼‰&lt;/code>ã€&lt;code>CONTENT LENGTH CONTROLï¼ˆç”Ÿæˆå†…å®¹å’Œé•¿åº¦è¯´æ˜Žï¼‰&lt;/code>ã€&lt;code>DETAILED SYNTHESIS PROCESSï¼ˆå…·ä½“çš„æ‰§è¡Œæ–¹å¼ï¼Œä¹Ÿå°±æ˜¯workflowï¼‰&lt;/code>ã€&lt;code>COMPREHENSIVE OUTPUT FORMATï¼ˆæœ€ç»ˆçš„è¾“å‡ºæ ¼å¼ï¼‰&lt;/code>&lt;/p>
&lt;h5 id="input">INPUT
&lt;/h5>&lt;p>è¯´æ˜Žäº†ä¸€ä¸‹ä¼ è¿›æ¥çš„åˆ†æžæœ‰ä¸¤ä¸ªï¼Œä¹Ÿå°±æ˜¯ä»‹ç»äº†ä¸€ä¸‹åˆšåˆšè¿›è¡Œçš„ä¸¤ä¸ªå·¥ä½œ&lt;/p>
&lt;h5 id="intelligent-document-access">INTELLIGENT DOCUMENT ACCESS
&lt;/h5>&lt;p>è¯´æ˜Žäº†æ€Žä¹ˆç”¨mcpåŽ»è¯»åˆ†ç‰‡&lt;/p>
&lt;h5 id="objective">OBJECTIVE
&lt;/h5>&lt;p>æœ€ç»ˆè¦å®žçŽ°çš„ç›®æ ‡ï¼Œåˆ›å»ºä¸€ä¸ªå¦‚æ­¤è¯¦ç»†çš„å®žæ–½è®¡åˆ’ï¼Œä»¥ä¾¿å¼€å‘äººå‘˜å¯ä»¥åœ¨ä¸é˜…è¯»æ•´ç¯‡è®ºæ–‡çš„æƒ…å†µä¸‹å¤åˆ¶å®ƒã€‚&lt;/p>
&lt;h5 id="content-length-control">CONTENT LENGTH CONTROL
&lt;/h5>&lt;p>è¯´æ˜Žäº†è¦åˆ›å»ºå“ªå‡ ä¸ªæ–‡ä»¶éƒ¨åˆ†ï¼Œå’Œæ¯ä¸ªéƒ¨åˆ†çš„å¤§æ¦‚å æ¯”&lt;/p>
&lt;ol>
&lt;li>åˆ›å»ºæ–‡ä»¶ç»“æž„ï¼Œä¸€å®šè¦å®Œæ•´&lt;/li>
&lt;li>å®žçŽ°ç»„ä»¶ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰&lt;/li>
&lt;li>æœ€ç»ˆçš„éªŒè¯&lt;/li>
&lt;li>æ‰€æœ‰éœ€è¦çš„ä¾èµ–ï¼ˆæŒ‡å¼€å‘çŽ¯å¢ƒçš„ï¼‰&lt;/li>
&lt;li>ä¸€æ­¥ä¸€æ­¥çš„å®žçŽ°ç»†èŠ‚&lt;/li>
&lt;/ol>
&lt;p>ç„¶åŽè¯´æ˜Žäº†ä¸€ä¸‹å®žçŽ°æ­¥éª¤ï¼Œå…ˆç®—æ³•æ–‡ä»¶ï¼Œç„¶åŽæ˜¯å·¥å…·ç±»ï¼Œç„¶åŽæ˜¯æµ‹è¯•è„šæœ¬ï¼Œç„¶åŽæ˜¯é…ç½®å’Œæ•°æ®å¤„ç†ï¼Œç„¶åŽæ‰æ˜¯è¯´æ˜Žæ–‡æ¡£ï¼Œç„¶åŽè¯´æ˜Žäº†è¦åŒ…å«READMEå’Œrequirements.txtï¼ˆå†™è®ºæ–‡çš„å–œæ¬¢ç”¨pythonå®žçŽ°ï¼Œæ‰€ä»¥è¯¥å·¥å…·å°±æ˜¯ä¸“æ³¨äºŽç”Ÿæˆpythonä»£ç ï¼‰&lt;/p>
&lt;h5 id="detailed-synthesis-process">DETAILED SYNTHESIS PROCESS
&lt;/h5>&lt;ol>
&lt;li>è¯´æ˜Žäº†è¦åˆå¹¶å¾—åˆ°çš„æ‰€æœ‰ä¿¡æ¯ï¼Œç„¶åŽè¯´äº†ä¸€ä¸‹å“ªäº›&lt;/li>
&lt;li>ç„¶åŽè¦æŠŠå¾—åˆ°çš„ä¿¡æ¯å˜æˆå®žçŽ°&lt;/li>
&lt;li>æŠ€æœ¯æå–çš„æ–¹æ³•&lt;/li>
&lt;/ol>
&lt;h5 id="comprehensive-output-format">COMPREHENSIVE OUTPUT FORMAT
&lt;/h5>&lt;p>è¾“å‡ºæ ¼å¼ï¼Œå¤§å®¶è‡ªå·±çœ‹å§ï¼Œå°±æ˜¯æŠŠä¸Šé¢å¾—åˆ°çš„ç»“æžœæ±‡æ€»è¾“å‡º&lt;/p>
&lt;hr>
&lt;p>å¥½çš„ï¼Œæ¼«é•¿çš„phase4ç»“æŸäº†ï¼Œæœ€ç»ˆå¾—åˆ°çš„ç»“æžœä¿å­˜åˆ°äº†&lt;code>initial_plan.txt&lt;/code>&lt;/p>
&lt;h3 id="phase-5">phase 5
&lt;/h3>&lt;p>è¯¥é˜¶æ®µå« Reference Intelligenceï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å®ƒæ˜¯æ€Žä¹ˆåšçš„ï¼Œæ¥è¿›æ¥çœ‹çœ‹è¿™ä¸ªå‡½æ•°ï¼Œæ³¨é‡Šæ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Orchestrate intelligent reference analysis with automated research discovery.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This agent autonomously processes research references and discovers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">related work using advanced AI-powered analysis algorithms.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Args:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dir_info: Workspace infrastructure metadata
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> logger: Logger instance for intelligence tracking
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> progress_callback: Progress callback function for monitoring
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Returns:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> str: Comprehensive reference intelligence analysis result
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¿»è¯‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">æ­¤æ™ºèƒ½ä»£ç†ï¼ˆAgentï¼‰åˆ©ç”¨å…ˆè¿›çš„ AI åˆ†æžç®—æ³•ï¼Œè‡ªä¸»å¤„ç†ç ”ç©¶æ–‡çŒ®å¹¶æŽ¢ç´¢ç›¸å…³å·¥ä½œã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å‚æ•° (Args):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dir_info: å·¥ä½œåŒºåŸºç¡€è®¾æ–½å…ƒæ•°æ®
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> logger: ç”¨äºŽæ™ºèƒ½è·Ÿè¸ªçš„æ—¥å¿—è®°å½•å™¨å®žä¾‹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> progress_callback: ç”¨äºŽè¿›åº¦ç›‘æŽ§çš„å›žè°ƒå‡½æ•°
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¿”å›žå€¼ (Returns):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> str: è¯¦å°½çš„æ–‡çŒ®æ™ºèƒ½åˆ†æžç»“æžœ
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‘ƒå‘ƒå‘ƒä¸ç®¡æ€Žä¹ˆçœ‹ï¼Œéƒ½è§‰å¾—è¿™ä¸ªè¯´çš„å¾ˆé‚ªä¹Žå§ï¼Œæ€»ä¹‹è®©æˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹&lt;/p>
&lt;p>é¦–å…ˆcheckäº†ä¸€ä¸‹ä¹‹å‰æœ‰æ²¡æœ‰åˆ›å»ºè¿‡è¿™ä¸ªæ–‡ä»¶ï¼Œæœ€æ ¸å¿ƒçš„æ˜¯ä¸‹é¢çš„å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">reference_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">paper_reference_analyzer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dir_info&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;paper_dir&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">logger&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®©æˆ‘ä»¬è¿›æ¥çœ‹çœ‹&lt;code>paper_reference_analyzer&lt;/code>&lt;/p>
&lt;p>è¿™ä¸ªå‡½æ•°çš„æ³¨é‡Šæ˜¯ï¼šRun the paper reference analysis and GitHub repository workflow.&lt;/p>
&lt;p>ç¿»è¯‘ä¸€ä¸‹ï¼šè¿è¡Œè®ºæ–‡æ–‡çŒ®åˆ†æžä¸Ž GitHub ä»“åº“å·¥ä½œæµã€‚&lt;/p>
&lt;p>é¹…æˆ‘å‹‰å¼ºçŒœä¸€ä¸‹ï¼Œå¯èƒ½æ˜¯èŽ·å–è®ºæ–‡å†…å®¹é‡Œçš„githubä»“åº“ï¼Œå¹¶åˆ†æžï¼Ÿæ€»ä¹‹æˆ‘ä»¬ç»§ç»­çœ‹&lt;/p>
&lt;p>ç„¶åŽä¸‹é¢å°±æ˜¯æ–°å»ºä¸€ä¸ªAgentå¼€å§‹è·‘äº†ç…§ä¾‹å…ˆçœ‹ä»–çš„prompt&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="line">&lt;span class="cl">You are an expert academic paper reference analyzer specializing in computer science and machine learning.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Task: Analyze paper and identify 5 most relevant references that have GitHub repositories.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Constraints:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> ONLY select references with GitHub repositories
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> DO NOT use target paper&amp;#39;s official implementation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> DO NOT use repositories directly associated with target paper
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> CAN analyze code implementations from referenced papers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> Focus on references with good implementations solving similar problems
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Analysis Criteria:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">1.&lt;/span> GitHub Repository Quality (40%):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Star count, activity, maintenance
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Documentation quality
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Community adoption
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Last update date
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">2.&lt;/span> Implementation Relevance (30%):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> References from methodology/implementation sections
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Algorithmic details
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Core component descriptions
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Code implementation quality
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">3.&lt;/span> Technical Depth (20%):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Algorithm/method similarity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Technical foundation relationship
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Implementation details
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Code structure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">4.&lt;/span> Academic Influence (10%):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Publication venue quality
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Author expertise
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Research impact
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">-&lt;/span> Citation influence
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Analysis Steps:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">1.&lt;/span> Extract all references from paper
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">2.&lt;/span> Filter references with GitHub repositories
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">3.&lt;/span> Analyze repositories based on criteria
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">4.&lt;/span> Calculate relevance scores
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">5.&lt;/span> Select and rank top 5 references
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Output Format:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;selected_references&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;rank&amp;#34;: 1,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;title&amp;#34;: &amp;#34;paper title&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;authors&amp;#34;: [&amp;#34;author1&amp;#34;, &amp;#34;author2&amp;#34;],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;year&amp;#34;: &amp;#34;publication year&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;relevance_score&amp;#34;: 0.95,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;citation_context&amp;#34;: &amp;#34;how cited in main paper&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;key_contributions&amp;#34;: [&amp;#34;contribution1&amp;#34;, &amp;#34;contribution2&amp;#34;],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;implementation_value&amp;#34;: &amp;#34;why valuable for implementation&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;github_info&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;repository_url&amp;#34;: &amp;#34;GitHub repository URL&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;stars_count&amp;#34;: &amp;#34;number of stars&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;last_updated&amp;#34;: &amp;#34;last update date&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;repository_quality&amp;#34;: &amp;#34;repository quality assessment&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;key_features&amp;#34;: [&amp;#34;feature1&amp;#34;, &amp;#34;feature2&amp;#34;],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;documentation_quality&amp;#34;: &amp;#34;documentation assessment&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;community_activity&amp;#34;: &amp;#34;community engagement description&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;original_reference&amp;#34;: &amp;#34;Complete reference text from paper&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;analysis_summary&amp;#34;: &amp;#34;selection process and key findings&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;github_repositories_found&amp;#34;: &amp;#34;total number of references with GitHub repositories&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆä»ç„¶æ˜¯äººè®¾å®šä¹‰ï¼šæ‚¨æ˜¯ä¸€ä½ä¸“é—¨ä»Žäº‹è®¡ç®—æœºç§‘å­¦å’Œæœºå™¨å­¦ä¹ çš„å­¦æœ¯è®ºæ–‡å‚è€ƒåˆ†æžä¸“å®¶ã€‚&lt;/p>
&lt;p>å†™åˆ°è¿™é‡Œçªç„¶æƒ³èŠä¸€ä¸‹äººè®¾çš„é—®é¢˜ï¼Œæœ€è¿‘çœ‹äº†ä¸å°‘æ–‡ç« éƒ½è¯´è§‰å¾—äººè®¾æ²¡æœ‰ç”¨ï¼Œåªä¼šç™½ç™½æ¶ˆè€—tokensï¼Œbtwæˆ‘è§‰å¾—è‡³å°‘ä¼šç»™agentæŒ‡å¼•å·¥ä½œçš„æ–¹å‘&lt;/p>
&lt;p>ç„¶åŽæ˜¯ä»»åŠ¡ï¼šåˆ†æžè®ºæ–‡å¹¶ç¡®å®š 5 ä¸ªå…·æœ‰ GitHub å­˜å‚¨åº“çš„æœ€ç›¸å…³å‚è€ƒæ–‡çŒ®ã€‚&lt;/p>
&lt;p>ç„¶åŽæ˜¯ä¸€äº›é™åˆ¶ï¼Œå¤§æ¦‚å°±æ˜¯ä¸è¦ç›´æŽ¥ç”¨åŽŸæ–‡ä¸­çš„githubç­‰ç­‰&lt;/p>
&lt;p>ç„¶åŽæ˜¯å››ä¸ªåˆ†æžæ ‡å‡†ï¼š&lt;/p>
&lt;ol>
&lt;li>githubä»“åº“çš„è´¨é‡è¦å¥½ï¼Œåˆ—äº†ä¸€äº›åˆ¤æ–­æŒ‡æ ‡&lt;/li>
&lt;li>å’Œæœ¬è®ºæ–‡æœ‰å¤šç›¸å…³&lt;/li>
&lt;li>æŠ€æœ¯æ·±åº¦ï¼Œæ¯”å¦‚ç®—æ³•çš„ç›¸ä¼¼æ€§å•¦ï¼Œå®žçŽ°çš„ç»†èŠ‚å•¦&lt;/li>
&lt;li>æœ€åŽæ˜¯å­¦æœ¯å½±å“åŠ›&lt;/li>
&lt;/ol>
&lt;p>ç„¶åŽå°±æ˜¯åˆ†æžæ­¥éª¤ï¼Œç„¶åŽå®šä¹‰äº†è¿”å›žæ ¼å¼&lt;/p>
&lt;p>æˆ‘ä»¬æ¥çœ‹çœ‹agentç”¨åˆ°çš„mcpï¼Œä¸€ä¸ªfilesystemå°±æ˜¯ç»™agentè¯»è®ºæ–‡å†…å®¹çš„ï¼Œä¸€ä¸ªfetchåº”è¯¥å°±æ˜¯è®©agentè®¿é—®githubä»“åº“çš„ï¼Œä¸è¿‡ä¸ªäººæ„Ÿè§‰è¿™æ ·æ•ˆæžœä¼šæ¯”è¾ƒå·®ï¼Œagentæ›´å¤§å¯èƒ½æ˜¯ä»Žè‡ªå·±çš„è®­ç»ƒæ•°æ®ä¸­æ‰¾åˆ°åˆé€‚çš„ä»“åº“ï¼Œç„¶åŽç”¨fetchåˆ¤æ–­ï¼Œåº”è¯¥ç»™ä¸€ä¸ªç±»ä¼¼äºŽgithubæœç´¢çš„mcpæ¥è¾…åŠ©åˆ¤æ–­&lt;/p>
&lt;p>æˆ‘ä»¬æ¥çœ‹ä¸‹å‘é€çš„å†…å®¹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="line">&lt;span class="cl">Analyze the research paper in directory: {paper_dir}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please locate and analyze the markdown (.md) file containing the research paper. &lt;span class="gs">**Focus specifically on the References/Bibliography section**&lt;/span> to identify and analyze the 5 most relevant references that have GitHub repositories.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Focus on:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">1.&lt;/span> &lt;span class="gs">**References section analysis**&lt;/span> - Extract all citations from the References/Bibliography part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">2.&lt;/span> References with high-quality GitHub implementations
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">3.&lt;/span> Papers cited for methodology, algorithms, or core techniques
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">4.&lt;/span> Related work that shares similar technical approaches
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">5.&lt;/span> Implementation references that could provide code patterns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Goal: Find the most valuable GitHub repositories from the paper&amp;#39;s reference list for code implementation reference.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆç»™äº†è·¯å¾„ï¼Œç„¶åŽåˆé‡å¤äº†ä¸‹ç›®æ ‡å’Œæ–¹æ³•ï¼Œè¯¥é˜¶æ®µæ¯”è¾ƒç®€å•ï¼Œåˆ°è¿™å°±ç»“æŸäº†&lt;/p>
&lt;h3 id="phase-6">phase 6
&lt;/h3>&lt;p>è¯¥é˜¶æ®µå«â€œRepository Acquisition Automationâ€ï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨åŽ»å¤„ç†githubä»“åº“ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªagent&lt;/p>
&lt;p>å…ˆçœ‹æ³¨é‡Šï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Automate&lt;/span> &lt;span class="n">intelligent&lt;/span> &lt;span class="n">repository&lt;/span> &lt;span class="n">acquisition&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">AI&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">guided&lt;/span> &lt;span class="n">selection&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">This&lt;/span> &lt;span class="n">agent&lt;/span> &lt;span class="n">autonomously&lt;/span> &lt;span class="n">identifies&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">evaluates&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">acquires&lt;/span> &lt;span class="n">relevant&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">repositories&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">intelligent&lt;/span> &lt;span class="n">filtering&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">automated&lt;/span> &lt;span class="n">download&lt;/span> &lt;span class="n">protocols&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">é€šè¿‡ AI å¼•å¯¼çš„é€‰æ‹©ï¼Œå®žçŽ°æ™ºèƒ½ä»“åº“èŽ·å–çš„è‡ªåŠ¨åŒ–ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æ­¤æ™ºèƒ½ä»£ç†ï¼ˆAgentï¼‰åˆ©ç”¨æ™ºèƒ½ç­›é€‰å’Œè‡ªåŠ¨åŒ–ä¸‹è½½åè®®ï¼Œè‡ªä¸»è¯†åˆ«ã€è¯„ä¼°å¹¶èŽ·å–ç›¸å…³çš„ä»£ç ä»“åº“ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆæ˜¯ä¸€ä¸ªä¸‹è½½ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼š&lt;code>github_repo_download&lt;/code>&lt;/p>
&lt;p>å‡½æ•°æ³¨é‡Šæ˜¯ï¼šâ€œDownload GitHub repositories based on search results.â€ï¼Œç„¶åŽæˆ‘å¾€ä¸‹ä¸€ä¸ªï¼Œå—¯ï¼Ÿè¿˜tmæ˜¯agentï¼Œè¯´å®žè¯æ„Ÿè§‰è¿™ä¸ªé¡¹ç›®æœ‰ç‚¹è¿‡åº¦agentç‚«æŠ€äº†ï¼Œå¾ˆå¤šå¤„åœ°æ–¹æ˜Žæ˜Žç”¨ä»£ç å®žçŽ°ä¼šæ›´åŠ ç¨³å®š &amp;amp;&amp;amp; æ•ˆæžœæ›´å¥½çš„ï¼Œä½†æ˜¯é¡¹ç›®ä½œè€…é€‰æ‹©å…¨éƒ¨ä½¿ç”¨agentåŽ»å †å ï¼Œç”±äºŽè¿™æ˜¯ä¸ªå­¦æœ¯æ€§è´¨çš„é¡¹ç›®ï¼Œæˆ‘å§‘ä¸”ç†è§£ä»–å°±æ˜¯ä¸ºäº†ä½“çŽ°agentè¿™ä¸ªæŠ€æœ¯ï¼Œå¹¶ä¸”ä¸ç”¨å¤ªè€ƒè™‘tokenæ¶ˆè€—ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šæˆ‘ä»¬ç»§ç»­çœ‹å§&lt;/p>
&lt;p>è¿™é‡Œå®žçŽ°äº†ä¸€ä¸ª&lt;code>github_download_agent&lt;/code>ï¼Œæç¤ºè¯éžå¸¸ç®€å•ï¼šâ€œDownload github repo to the directory {paper_dir}/code_baseâ€ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰é¡¹ç›®ä¸‹è½½ä¸‹æ¥å‘—ï¼Œè¿™è¿˜è¦agentï¼Ÿï¼ˆbushiï¼Œæˆ‘çœŸæ²¡æœ‰è¯‹æ¯çš„æ„æ€ï¼‰&lt;/p>
&lt;p>mcpæ˜¯&lt;code>filesystem&lt;/code>å’Œ&lt;code>github-downloader&lt;/code>ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹&lt;code>github-downloader&lt;/code>æœ‰å“ªäº›å·¥å…·ï¼Œæ¥çœ‹&lt;code>tools/git_command.py&lt;/code>&lt;/p>
&lt;p>ä¸€å…±æœ‰ä¸‰ä¸ªå·¥å…·ï¼š&lt;/p></description></item></channel></rss>